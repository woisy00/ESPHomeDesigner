const S=(e,o,{getColorStyle:n})=>{const r=o.props||{},c=r.color||"black";let t=r.size||32,f=r.font_size||16,s=r.label_font_size||12;const a=r.unit||"°C",u=r.show_label!==!1,i=r.precision??1;let d=22.5;if(r.fit_icon_to_frame){const $=(o.height||60)-4;t=Math.round($*.45),f=Math.round($*.25),s=Math.round($*.15),t=Math.max(8,t),f=Math.max(8,f),s=Math.max(6,s)}if(!r.is_local_sensor&&o.entity_id&&window.AppState&&window.AppState.entityStates){const p=window.AppState.entityStates[o.entity_id];if(p&&p.state!==void 0){const $=parseFloat(p.state);isNaN($)||(d=$)}}let _;d<=10?_="F0E4C":d<=25?_="F050F":_="F10C2";const x=983040+parseInt(_.slice(1),16),m=String.fromCodePoint(x);e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="center",e.style.justifyContent="center",e.style.color=n(c);const l=document.createElement("div");l.textContent=m,l.style.fontSize=`${t}px`,l.style.fontFamily="MDI, system-ui, -apple-system, BlinkMacSystemFont, sans-serif",l.style.lineHeight="1",e.appendChild(l);const h=document.createElement("div");h.style.fontSize=`${f}px`,h.style.fontWeight="500",h.style.marginTop="2px";let b=d;if(a==="°F"&&(b=d*9/5+32),h.textContent=b.toFixed(i)+a,e.appendChild(h),u){const p=document.createElement("div");p.style.fontSize=`${s}px`,p.style.opacity="0.7",p.style.marginTop="1px",p.textContent="Temperature",e.appendChild(p)}},z={id:"ondevice_temperature",name:"Temperature",category:"SHT4x",defaults:{width:60,height:60,size:32,font_size:16,label_font_size:10,color:"black",unit:"°C",show_label:!0,precision:1,fit_icon_to_frame:!0,is_local_sensor:!0},render:S,exportLVGL:(e,{common:o,convertColor:n,getLVGLFont:r,profile:c})=>{const t=e.props||{},f=t.is_local_sensor===!0||t.is_local_sensor!==!1&&!e.entity_id;let s=(e.entity_id||"").replace(/[^a-zA-Z0-9_]/g,"_");f&&c.features&&(s=c.features.sht4x?"sht4x_temperature":c.features.sht3x?"sht3x_temperature":c.features.shtc3?"shtc3_temperature":"onboard_temperature"),s||(s="onboard_temperature");const a=n(t.color||"black"),u=parseInt(t.size||32,10),i=parseInt(t.font_size||16,10),d=parseInt(t.label_font_size||10,10),_=t.unit||"°C",x=c.features&&(c.features.sht4x||c.features.sht3x||c.features.shtc3),m=f&&x&&s!=="onboard_temperature"||!!e.entity_id;if(!m)return{obj:{...o,bg_opa:"transp",border_width:0,widgets:[{label:{width:parseInt(t.size||32,10)+10,height:parseInt(t.size||32,10)+4,align:"top_mid",text:"\\U000F050F",text_font:r("Material Design Icons",parseInt(t.size||32,10),400),text_color:n(t.color||"black")}},{label:{width:"100%",height:parseInt(t.font_size||16,10)+6,align:"top_mid",y:parseInt(t.size||32,10)+2,text:`--${t.unit||"°C"}`,text_font:r("Roboto",parseInt(t.font_size||16,10),400),text_color:n(t.color||"black"),text_align:"center"}},...t.show_label?[{label:{width:"100%",height:parseInt(t.label_font_size||10,10)+4,align:"bottom_mid",text:'"Temperature"',text_font:r("Roboto",parseInt(t.label_font_size||10,10),400),text_color:n(t.color||"black"),text_align:"center",opa:"70%"}}]:[]]}};let l=`!lambda |-
`;m&&(l+=`          if (id(${s}).has_state()) {
`,l+=`            float t = id(${s}).state;
`,l+=`            if (t <= 10) return "\\U000F0E4C";
`,l+=`            if (t <= 25) return "\\U000F050F";
`,l+=`            return "\\U000F10C2";
`,l+=`          }
`,l+='          return "\\U000F050F";');let h=`!lambda |-
`;if(m){h+=`          if (id(${s}).has_state()) {
`;let p=`id(${s}).state`;_==="°F"&&(p=`(id(${s}).state * 9.0 / 5.0) + 32.0`),h+=`            return str_sprintf("%.1f${_}", ${p}).c_str();
`,h+=`          }
`,h+=`          return "--${_}";`}const b=[{label:{width:u+10,height:u+4,align:"top_mid",text:l,text_font:r("Material Design Icons",u,400),text_color:a}},{label:{width:"100%",height:i+6,align:"top_mid",y:u+2,text:h,text_font:r("Roboto",i,400),text_color:a,text_align:"center"}}];return t.show_label&&b.push({label:{width:"100%",height:d+4,align:"bottom_mid",text:'"Temperature"',text_font:r("Roboto",d,400),text_color:a,text_align:"center",opa:"70%"}}),{obj:{...o,bg_opa:"transp",border_width:0,widgets:b}}},collectRequirements:(e,o)=>{const{trackIcon:n,addFont:r}=o,c=e.props||{},t=parseInt(c.size||32,10),f=parseInt(c.font_size||16,10),s=parseInt(c.label_font_size||10,10);r("Material Design Icons",400,t),r("Roboto",400,f),c.show_label&&r("Roboto",400,s),["F0E4C","F050F","F10C2"].forEach(a=>n(a,t))},export:(e,o)=>{const{lines:n,getColorConst:r,getCondProps:c,getConditionCheck:t,addFont:f,profile:s}=o,a=e.props||{},u=r(a.color||"black"),i=a.unit||"°C",d=a.size||32,_=a.font_size||16,x=f("Material Design Icons",400,d),m=f("Roboto",400,_),l=a.is_local_sensor===!0||a.is_local_sensor!==!1&&!e.entity_id;let h=(e.entity_id||"").replace(/[^a-zA-Z0-9_]/g,"_");l&&s.features&&(h=s.features.sht4x?"sht4x_temperature":s.features.sht3x?"sht3x_temperature":s.features.shtc3?"shtc3_temperature":"onboard_temperature"),h||(h="onboard_temperature"),n.push(`        // widget:ondevice_temperature id:${e.id} type:ondevice_temperature x:${e.x} y:${e.y} w:${e.width} h:${e.height} unit:${i} local:${l} ent:${e.entity_id||""} ${c(e)}`);const b=t(e);b&&n.push(`        ${b}`);const p=`${e.x} + ${e.width} / 2`,$=`${e.y} + ${Math.round(d/2)}`,I=s.features&&(s.features.sht4x||s.features.sht3x||s.features.shtc3),y=l&&I&&h!=="onboard_temperature"||!!e.entity_id;if(y?(n.push(`        if (id(${h}).has_state()) {`),n.push(`          if (id(${h}).state <= 10) {`),n.push(`            it.printf(${p}, ${$}, id(${x}), ${u}, TextAlign::CENTER, "\\U000F0E4C");`),n.push(`          } else if (id(${h}).state <= 25) {`),n.push(`            it.printf(${p}, ${$}, id(${x}), ${u}, TextAlign::CENTER, "\\U000F050F");`),n.push("          } else {"),n.push(`            it.printf(${p}, ${$}, id(${x}), ${u}, TextAlign::CENTER, "\\U000F10C2");`),n.push("          }"),n.push("        } else {"),n.push(`          it.printf(${p}, ${$}, id(${x}), ${u}, TextAlign::CENTER, "\\U000F050F");`),n.push("        }")):n.push(`          it.printf(${p}, ${$}, id(${x}), ${u}, TextAlign::CENTER, "\\U000F050F");`),y){let g=`id(${h}).state`;i==="°F"&&(g=`(id(${h}).state * 9.0 / 5.0) + 32.0`),n.push(`        if (id(${h}).has_state()) {`),n.push(`          it.printf(${p}, ${e.y} + ${d+5}, id(${m}), ${u}, TextAlign::TOP_CENTER, "%.1f${i}", ${g});`),n.push("        } else {"),n.push(`          it.printf(${p}, ${e.y} + ${d+5}, id(${m}), ${u}, TextAlign::TOP_CENTER, "--${i}");`),n.push("        }")}else n.push(`          it.printf(${p}, ${e.y} + ${d+5}, id(${m}), ${u}, TextAlign::TOP_CENTER, "--${i}");`);if(a.show_label){const g=f("Roboto",400,a.label_font_size||10);n.push(`        it.printf(${p}, ${e.y} + ${d+_+8}, id(${g}), ${u}, TextAlign::TOP_CENTER, "Temperature");`)}b&&n.push("        }")},onExportNumericSensors:e=>{const{lines:o,widgets:n,isLvgl:r,pendingTriggers:c,profile:t}=e;if(!n)return;let f=!1;for(const s of n){if(s.type!=="ondevice_temperature")continue;const a=s.props||{},u=a.is_local_sensor===!0||a.is_local_sensor!==!1&&!s.entity_id;let i=(s.entity_id||"").trim();if(u?(f=!0,t.features?i=t.features.sht4x?"sht4x_temperature":t.features.sht3x?"sht3x_temperature":t.features.shtc3?"shtc3_temperature":"onboard_temperature":i="onboard_temperature"):i&&(i.includes(".")||(i=`sensor.${i}`)),!!i&&(r&&c&&(c.has(i)||c.set(i,new Set),c.get(i).add(`- lvgl.widget.refresh: ${s.id}`)),!u&&i.startsWith("sensor."))){const d=i.replace(/[^a-zA-Z0-9_]/g,"_");e.seenSensorIds&&!e.seenSensorIds.has(d)&&(e.seenSensorIds.size===0&&(o.push(""),o.push("# External Temperature Sensors")),e.seenSensorIds.add(d),o.push("- platform: homeassistant"),o.push(`  id: ${d}`),o.push(`  entity_id: ${i}`),o.push("  internal: true"))}}if(f&&t.features){const s=!!t.features.sht4x,a=!!t.features.sht3x,u=!!t.features.shtc3;if(s||a||u){const i=s?"sht4x_sensor":a?"sht3x_sensor":"shtc3_sensor",d=s?"sht4x":a?"sht3xd":"shtcx",_=s?"sht4x_temperature":a?"sht3x_temperature":"shtc3_temperature",x=e.mainLines||o;e.seenSensorIds&&e.seenSensorIds.has(i)||e.seenSensorIds&&e.seenSensorIds.has(_)||x.some(l=>l.includes(`id: ${i}`))||(e.seenSensorIds&&(e.seenSensorIds.add(i),e.seenSensorIds.add(_)),o.push(`- platform: ${d}`,`  id: ${i}`),o.push("  temperature:",`    id: ${_}`,"    internal: true"),o.push("  update_interval: 60s"),d==="shtcx"&&!o.some(l=>l.includes("address: 0x70"))&&(o.push("    address: 0x70"),o.push("    i2c_id: bus_a")),d==="sht3xd"&&!o.some(l=>l.includes("address: 0x44"))&&o.push("    address: 0x44"))}}}};export{z as default};

const C=(t,r,{getColorStyle:e})=>{const l=r.props||{};let i="F0079",c=l.size||24;const o=l.color||"black";let s=75;if(l.fit_icon_to_frame){const a=Math.max(8,Math.min((r.width||0)-8,(r.height||0)-8));c=Math.round(a)}if(window.AppState&&window.AppState.entityStates&&r.entity_id){const n=window.AppState.entityStates[r.entity_id];if(n&&n.state!==void 0){const a=parseFloat(n.state);isNaN(a)||(s=a)}}s>=95?i="F0079":s>=85?i="F0082":s>=75?i="F0081":s>=65?i="F0080":s>=55?i="F007F":s>=45?i="F007E":s>=35?i="F007D":s>=25?i="F007C":s>=15?i="F007B":s>=5?i="F007A":i="F0083";const _=983040+parseInt(i.slice(1),16),f=String.fromCodePoint(_);t.innerText=f,t.style.fontSize=`${c}px`,t.style.color=e(o),t.style.fontFamily="MDI, system-ui, -apple-system, BlinkMacSystemFont, -sans-serif",t.style.lineHeight="1",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.flexDirection="column";const p=document.createElement("div");p.style.fontSize=(l.font_size||12)+"px",p.style.marginTop="2px",p.textContent=Math.round(s)+"%",t.appendChild(p)},S=(t,r)=>{const{lines:e,addFont:l,getColorConst:i,addDitherMask:c,getCondProps:o,getConditionCheck:s,isEpaper:_,RECT_Y_OFFSET:f}=r,p=t.props||{},n=(t.entity_id||"").trim(),a=parseInt(p.size||24,10),b=parseInt(p.font_size||12,10),h=p.color||"black",y=i(h),g=l("Material Design Icons",400,a),x=l("Roboto",400,b);let d;p.is_local_sensor?d="battery_level":d=n?n.replace(/[^a-zA-Z0-9_]/g,"_"):"battery_level",e.push(`        // widget:battery_icon id:${t.id} type:battery_icon x:${t.x} y:${t.y} w:${t.width} h:${t.height} entity:${n||"battery_level"} size:${a} font_size:${b} color:${h} local:${!!p.is_local_sensor} ${o(t)}`);const u=s(t);u&&e.push(`        ${u}`);const F=2,m=a+F+b,$=`(${t.height} - ${m}) / 2`,v=`${t.x} + ${t.width} / 2`,z=`${t.y} + ${$}`,U=`${t.y} + ${$} + ${a} + ${F}`;e.push("        {"),e.push('          const char* bat_icon = "\\U000F0082"; // Default: battery-90'),e.push("          float bat_level = 0;"),e.push(`          if (id(${d}).has_state()) {`),e.push(`            bat_level = id(${d}).state;`),e.push("            if (std::isnan(bat_level)) bat_level = 0;"),e.push('            if (bat_level >= 95) bat_icon = "\\U000F0079";      // battery (full)'),e.push('            else if (bat_level >= 85) bat_icon = "\\U000F0082"; // battery-90'),e.push('            else if (bat_level >= 75) bat_icon = "\\U000F0081"; // battery-80'),e.push('            else if (bat_level >= 65) bat_icon = "\\U000F0080"; // battery-70'),e.push('            else if (bat_level >= 55) bat_icon = "\\U000F007F"; // battery-60'),e.push('            else if (bat_level >= 45) bat_icon = "\\U000F007E"; // battery-50'),e.push('            else if (bat_level >= 35) bat_icon = "\\U000F007D"; // battery-40'),e.push('            else if (bat_level >= 25) bat_icon = "\\U000F007C"; // battery-30'),e.push('            else if (bat_level >= 15) bat_icon = "\\U000F007B"; // battery-20'),e.push('            else if (bat_level >= 5) bat_icon = "\\U000F007A";  // battery-10'),e.push('            else bat_icon = "\\U000F0083";                      // battery-alert (critical)'),e.push("          }"),e.push(`          it.printf(${v}, ${z}, id(${g}), ${y}, TextAlign::TOP_CENTER, "%s", bat_icon);`),e.push(`          it.printf(${v}, ${U}, id(${x}), ${y}, TextAlign::TOP_CENTER, "%.0f%%", bat_level);`);const I=t.y+(typeof f<"u"?f:0);c(e,h,_,t.x,I,t.width,t.height),e.push("        }"),u&&e.push("        }")},E={id:"battery_icon",name:"Battery",category:"Sensors",defaults:{width:60,height:60,size:36,font_size:14,color:"black"},render:C,exportLVGL:(t,{common:r,convertColor:e,getLVGLFont:l,formatOpacity:i})=>{const c=t.props||{},o=(t.entity_id||"").trim(),s=c.is_local_sensor?"battery_level":o?o.replace(/[^a-zA-Z0-9_]/g,"_"):"battery_level",_=e(c.color||"black"),f=parseInt(c.size||24,10),p=parseInt(c.font_size||12,10);let n=`!lambda |-
`;n+=`          if (id(${s}).has_state()) {
`,n+=`            float lvl = id(${s}).state;
`,n+=`            if (lvl >= 95) return "\\U000F0079";
`,n+=`            if (lvl >= 85) return "\\U000F0082";
`,n+=`            if (lvl >= 75) return "\\U000F0081";
`,n+=`            if (lvl >= 65) return "\\U000F0080";
`,n+=`            if (lvl >= 55) return "\\U000F007F";
`,n+=`            if (lvl >= 45) return "\\U000F007E";
`,n+=`            if (lvl >= 35) return "\\U000F007D";
`,n+=`            if (lvl >= 25) return "\\U000F007C";
`,n+=`            if (lvl >= 15) return "\\U000F007B";
`,n+=`            if (lvl >= 5) return "\\U000F007A";
`,n+=`            return "\\U000F0083";
`,n+=`          }
`,n+='          return "\\U000F0083";';let a=`!lambda |-
`;return a+=`          if (id(${s}).has_state()) {
`,a+=`            return str_sprintf("%.0f%%", id(${s}).state).c_str();
`,a+=`          }
`,a+='          return "---%";',{obj:{...r,bg_opa:"TRANSP",border_width:0,widgets:[{label:{width:f+10,height:f+4,align:"TOP_MID",text:n,text_font:l("Material Design Icons",f,400),text_color:_}},{label:{width:"100%",height:p+4,align:"BOTTOM_MID",y:2,text:a,text_font:l("Roboto",p,400),text_color:_,text_align:"CENTER"}}]}}},collectRequirements:(t,r)=>{const{trackIcon:e,addFont:l}=r,i=t.props||{},c=parseInt(i.size||24,10),o=parseInt(i.font_size||12,10);l("Material Design Icons",400,c),l("Roboto",400,o),["F0079","F0082","F0081","F0080","F007F","F007E","F007D","F007C","F007B","F007A","F0083"].forEach(s=>e(s,c))},export:S,onExportNumericSensors:t=>{const{lines:r,widgets:e}=t;if(!e)return;const l=new Set;for(const i of e){if(i.type!=="battery_icon"||(i.props||{}).is_local_sensor)continue;let o=(i.entity_id||"").trim();if(o&&(o.includes(".")||(o=`sensor.${o}`),!l.has(o))){l.add(o);const s=o.replace(/[^a-zA-Z0-9_]/g,"_");r.push("- platform: homeassistant",`  id: ${s}`,`  entity_id: ${o}`,"  internal: true")}}}};export{E as default};

const b=(i,d,{getColorStyle:c})=>{const s=d.props||{},t=c(s.color||"black"),n=c(s.bg_color||"gray"),y=s.border_width||2,e=s.vertical||!1;i.innerHTML="",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center";const o=s.min||0,p=s.max||100,h=s.value!==void 0?s.value:30,_=p-o,u=Math.max(0,Math.min(100,(h-o)/(_||1)*100)),a=document.createElement("div");a.style.position="relative",a.style.backgroundColor=n,a.style.borderRadius="10px",e?(a.style.width="30%",a.style.height="100%",i.style.flexDirection="column"):(a.style.width="100%",a.style.height="30%"),i.appendChild(a);const r=document.createElement("div");r.style.position="absolute",r.style.backgroundColor=t,r.style.borderRadius="10px",e?(r.style.left="0",r.style.bottom="0",r.style.width="100%",r.style.height=`${u}%`):(r.style.left="0",r.style.top="0",r.style.height="100%",r.style.width=`${u}%`),a.appendChild(r);const l=document.createElement("div"),m=e?d.width*.8:d.height*.8;l.style.width=`${m}px`,l.style.height=`${m}px`,l.style.backgroundColor=t,l.style.border=`${y}px solid white`,l.style.borderRadius="50%",l.style.position="absolute",e?(l.style.left=`calc(50% - ${m/2}px)`,l.style.bottom=`calc(${u}% - ${m/2}px)`):(l.style.left=`calc(${u}% - ${m/2}px)`,l.style.top=`calc(50% - ${m/2}px)`),a.appendChild(l)},v=(i,{common:d,convertColor:c,profile:s})=>{const t=i.props||{};s?.touch;let n=t.value||30;i.entity_id&&(n=`!lambda "return id(${i.entity_id.replace(/[^a-zA-Z0-9_]/g,"_")}).state;"`);const y={slider:{...d,min_value:t.min||0,max_value:t.max||100,value:n,border_width:t.border_width||2,bg_color:c(t.bg_color||"gray"),indicator:{bg_color:c(t.color)},knob:{bg_color:c(t.color),border_width:2,border_color:"0xFFFFFF"},mode:t.mode||"normal",on_value:void 0}};if(i.entity_id){const e=i.entity_id.trim();let o;e.startsWith("light.")?o={"homeassistant.service":{service:"light.turn_on",data:{entity_id:e,brightness_pct:"!lambda 'return x;'"}}}:e.startsWith("fan.")?o={"homeassistant.service":{service:"fan.set_percentage",data:{entity_id:e,percentage:"!lambda 'return x;'"}}}:e.startsWith("cover.")?o={"homeassistant.service":{service:"cover.set_cover_position",data:{entity_id:e,position:"!lambda 'return x;'"}}}:e.startsWith("media_player.")?o={"homeassistant.service":{service:"media_player.volume_set",data:{entity_id:e,volume_level:"!lambda 'return x / 100.0;'"}}}:e.startsWith("climate.")?o={"homeassistant.service":{service:"climate.set_temperature",data:{entity_id:e,temperature:"!lambda 'return x;'"}}}:o={"homeassistant.service":{service:"number.set_value",data:{entity_id:e,value:"!lambda 'return x;'"}}},y.slider.on_value=[o]}return y},g=i=>{const{widgets:d,isLvgl:c,pendingTriggers:s}=i;if(d)for(const t of d){if(t.type!=="lvgl_slider")continue;const n=(t.entity_id||t.props?.entity_id||"").trim();n&&c&&s&&(s.has(n)||s.set(n,new Set),s.get(n).add(`- lvgl.widget.refresh: ${t.id}`))}},f={id:"lvgl_slider",name:"Slider",category:"LVGL",supportedModes:["lvgl"],defaults:{value:30,min:0,max:100,color:"blue",bg_color:"gray",border_width:2,mode:"normal",vertical:!1},render:b,exportLVGL:v,onExportNumericSensors:g};export{f as default};

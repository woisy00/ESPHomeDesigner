const I=(e,s,{getColorStyle:t})=>{const c=s.props||{},r=c.color||"black",n=c.icon_size||24,l=c.border_thickness||0;e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="space-around",e.style.padding="0 10px",e.style.boxSizing="border-box";let d=t(r);if(e.style.overflow="hidden",c.show_background){const i=t(c.background_color||"white");e.style.backgroundColor=i,e.style.borderRadius=(c.border_radius||8)+"px",l>0?e.style.border=`${l}px solid ${t(c.border_color||"white")}`:e.style.border="none",d==="#000000"&&i==="#000000"&&(d="#ffffff"),(!c.background_color||c.background_color==="transparent")&&(e.style.border="1px dashed #444")}else e.style.backgroundColor="transparent",e.style.borderRadius="0",e.style.border="none";e.style.color=d;const h=[];c.show_prev!==!1&&h.push({type:"prev",icon:"F0141"}),c.show_home!==!1&&h.push({type:"home",icon:"F02DC"}),c.show_next!==!1&&h.push({type:"next",icon:"F0142"}),e.innerHTML="",h.forEach(i=>{const o=document.createElement("span"),p=parseInt(i.icon,16);o.innerText=String.fromCodePoint(p),o.style.fontFamily="'Material Design Icons', 'MDI', system-ui, -sans-serif",o.style.fontSize=n+"px",o.style.lineHeight="1",o.style.cursor="pointer",o.style.padding="5px",o.style.transition="transform 0.1s",o.onmousedown=()=>o.style.transform="scale(0.9)",o.onmouseup=()=>o.style.transform="scale(1)",o.onmouseleave=()=>o.style.transform="scale(1)",e.appendChild(o)})},M=(e,s)=>{const{lines:t,addFont:c,getColorConst:r,addDitherMask:n,getCondProps:l,getConditionCheck:d,isEpaper:h}=s,i=e.props||{},o=parseInt(i.icon_size||24,10),p=i.color||"white",_=r(p),g=i.show_prev!==!1,u=i.show_home!==!1,x=i.show_next!==!1,m=i.show_background!==!1,b=r(i.background_color||"black"),f=parseInt(i.border_radius||8,10),a=parseInt(i.border_thickness||0,10),F=r(i.border_color||"white"),k=c("Material Design Icons",400,o);t.push(`        // widget:template_nav_bar id:${e.id} type:template_nav_bar x:${e.x} y:${e.y} w:${e.width} h:${e.height} prev:${g} home:${u} next:${x} bg:${m} bg_color:${i.background_color||"black"} radius:${f} border:${a} icon_size:${o} color:${p} ${l(e)}`);const w=d(e);w&&t.push(`        ${w}`),t.push("        {"),m&&(f>0?(t.push("          auto draw_filled_rrect = [&](int x, int y, int w, int h, int r, auto c) {"),t.push("            it.filled_rectangle(x + r, y, w - 2 * r, h, c);"),t.push("            it.filled_rectangle(x, y + r, r, h - 2 * r, c);"),t.push("            it.filled_rectangle(x + w - r, y + r, r, h - 2 * r, c);"),t.push("            it.filled_circle(x + r, y + r, r, c);"),t.push("            it.filled_circle(x + w - r - 1, y + r, r, c);"),t.push("            it.filled_circle(x + r, y + h - r - 1, r, c);"),t.push("            it.filled_circle(x + w - r - 1, y + h - r - 1, r, c);"),t.push("          };"),a>0?(t.push(`          draw_filled_rrect(${e.x}, ${e.y}, ${e.width}, ${e.height}, ${f}, ${F});`),t.push(`          draw_filled_rrect(${e.x+a}, ${e.y+a}, ${e.width-2*a}, ${e.height-2*a}, ${Math.max(0,f-a)}, ${b});`)):t.push(`          draw_filled_rrect(${e.x}, ${e.y}, ${e.width}, ${e.height}, ${f}, ${b});`)):a>0?(t.push(`          it.filled_rectangle(${e.x}, ${e.y}, ${e.width}, ${e.height}, ${F});`),t.push(`          it.filled_rectangle(${e.x+a}, ${e.y+a}, ${e.width-2*a}, ${e.height-2*a}, ${b});`)):t.push(`          it.filled_rectangle(${e.x}, ${e.y}, ${e.width}, ${e.height}, ${b});`),n(t,i.background_color||"black",h,e.x,e.y,e.width,e.height,f));let $=0;if(g&&$++,u&&$++,x&&$++,$>0){const v=e.width/$;let y=e.x+v/2;const C=e.y+e.height/2;g&&(t.push(`          it.printf(${Math.round(y)}, ${C}, id(${k}), ${_}, TextAlign::CENTER, "\\U000F0141");`),y+=v),u&&(t.push(`          it.printf(${Math.round(y)}, ${C}, id(${k}), ${_}, TextAlign::CENTER, "\\U000F02DC");`),y+=v),x&&t.push(`          it.printf(${Math.round(y)}, ${C}, id(${k}), ${_}, TextAlign::CENTER, "\\U000F0142");`)}n(t,p,h,e.x,e.y,e.width,e.height),t.push("        }"),w&&t.push("        }")},z=e=>{const{lines:s,widgets:t,profile:c}=e;if(!c||!c.touch)return;const r=t.filter(n=>n.type==="template_nav_bar");r.length!==0&&r.forEach(n=>{const l=n.props||{},d=l.show_prev!==!1,h=l.show_home!==!1,i=l.show_next!==!1;let o=0;if(d&&o++,h&&o++,i&&o++,o>0){const p=Math.floor(n.width/o);let _=0;const g=u=>{const x=n.x+_*p,m=x+p,b=n.y,f=n.y+n.height;s.push("  - platform: touchscreen"),s.push(`    id: nav_${u}_${n.id.replace(/-/g,"_")}`),s.push("    touchscreen_id: my_touchscreen"),s.push(`    x_min: ${x}`),s.push(`    x_max: ${m}`),s.push(`    y_min: ${b}`),s.push(`    y_max: ${f}`),s.push("    on_press:");const a=n._pageIndex!==void 0?n._pageIndex:0;s.push("      - if:"),s.push("          condition:"),s.push(`            lambda: 'return id(display_page) == ${a};'`),s.push("          then:"),u==="prev"?(s.push("            - script.execute:"),s.push("                id: change_page_to"),s.push("                target_page: !lambda 'return id(display_page) - 1;'")):u==="home"?s.push("            - script.execute: manage_run_and_sleep"):u==="next"&&(s.push("            - script.execute:"),s.push("                id: change_page_to"),s.push("                target_page: !lambda 'return id(display_page) + 1;'")),_++};d&&g("prev"),h&&g("home"),i&&g("next")}})},D={id:"template_nav_bar",name:"Nav Bar",category:"Templates",defaults:{w:180,h:40,show_prev:!0,show_home:!0,show_next:!0,show_background:!0,background_color:"black",border_radius:8,color:"white",icon_size:24},render:I,exportLVGL:(e,{common:s,convertColor:t,getLVGLFont:c})=>{const r=e.props||{},n=parseInt(r.icon_size||24,10),l=t(r.color||"white"),d=r.show_prev!==!1,h=r.show_home!==!1,i=r.show_next!==!1,o=[],p={width:n+16,height:"100%",bg_opa:"transp",border_width:0,radius:0,pad_all:0,layout:{type:"flex",flex_align_main:"center",flex_align_cross:"center"}},_=c("Material Design Icons",n,400);return d&&o.push({button:{...p,on_click:[{"script.execute":{id:"change_page_to",target_page:"!lambda 'return id(display_page) - 1;'"}}],widgets:[{label:{align:"center",text:'"\\U000F0141"',text_font:_,text_color:l}}]}}),h&&o.push({button:{...p,on_click:[{"script.execute":"manage_run_and_sleep"}],widgets:[{label:{align:"center",text:'"\\U000F02DC"',text_font:_,text_color:l}}]}}),i&&o.push({button:{...p,on_click:[{"script.execute":{id:"change_page_to",target_page:"!lambda 'return id(display_page) + 1;'"}}],widgets:[{label:{align:"center",text:'"\\U000F0142"',text_font:_,text_color:l}}]}}),{obj:{...s,bg_color:r.show_background!==!1?t(r.background_color||"black"):"transp",bg_opa:r.show_background!==!1?"cover":"transp",radius:r.border_radius||8,border_width:r.border_thickness||0,border_color:t(r.border_color||"white"),layout:{type:"flex",flex_flow:"row",flex_align_main:"space_around",flex_align_cross:"center"},widgets:o}}},export:M,onExportBinarySensors:z,collectRequirements:(e,s)=>{const{trackIcon:t,addFont:c}=s,r=e.props||{},n=parseInt(r.icon_size||24,10);c("Material Design Icons",400,n),r.show_prev!==!1&&t("F0141",n),r.show_home!==!1&&t("F02DC",n),r.show_next!==!1&&t("F0142",n)}};export{D as default};

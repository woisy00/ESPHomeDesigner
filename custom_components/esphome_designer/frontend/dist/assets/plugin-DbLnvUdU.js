const g=(e,s,{getColorStyle:n})=>{const t=s.props||{},o=n(t.color||"black"),a=n(t.bg_color||"gray");e.innerHTML="",e.style.backgroundColor=a,e.style.borderRadius="4px",e.style.overflow="hidden",e.style.position="relative";const i=t.min||0,l=t.max||100,d=t.value!==void 0?t.value:50,c=l-i,u=Math.max(0,Math.min(100,(d-i)/(c||1)*100)),r=document.createElement("div");r.style.position="absolute",r.style.left="0",r.style.top="0",r.style.height="100%",r.style.width=`${u}%`,r.style.backgroundColor=o,e.appendChild(r)},m=(e,{common:s,convertColor:n})=>{const t=e.props||{};let o=t.value||0;return e.entity_id&&(o=`!lambda "return id(${e.entity_id.replace(/[^a-zA-Z0-9_]/g,"_")}).state;"`),{bar:{...s,min_value:t.min||0,max_value:t.max||100,value:o,bg_color:n(t.bg_color||"gray"),indicator:{bg_color:n(t.color)},start_value:t.mode==="range"?t.start_value:void 0,mode:t.mode}}},p=e=>{const{widgets:s,isLvgl:n,pendingTriggers:t}=e;if(s)for(const o of s){if(o.type!=="lvgl_bar")continue;const a=(o.entity_id||o.props?.entity_id||"").trim();a&&n&&t&&(t.has(a)||t.set(a,new Set),t.get(a).add(`- lvgl.widget.refresh: ${o.id}`))}},y={id:"lvgl_bar",name:"Bar",category:"LVGL",defaults:{value:50,min:0,max:100,color:"blue",bg_color:"gray",start_value:0,mode:"normal"},render:g,exportLVGL:m,onExportNumericSensors:p};export{y as default};

const y=(t,i,{getColorStyle:e})=>{const r=i.props||{};let n="F0595",c=r.size||24;const o=r.color||"black";let a="sunny";const s=i.entity_id||r.weather_entity||"weather.forecast_home";if(window.AppState&&window.AppState.entityStates){const p=window.AppState.entityStates[s],l=p&&p.state!==void 0?p.state:null;l!=null&&(a=String(l).toLowerCase())}if(r.fit_icon_to_frame){const l=Math.max(8,Math.min((i.width||0)-8,(i.height||0)-8));c=Math.round(l)}switch(a){case"clear-night":n="F0594";break;case"cloudy":n="F0590";break;case"exceptional":n="F0026";break;case"fog":n="F0591";break;case"hail":n="F0592";break;case"lightning":n="F0593";break;case"lightning-rainy":n="F067E";break;case"partlycloudy":n="F0595";break;case"pouring":n="F0596";break;case"rainy":n="F0597";break;case"snowy":n="F0598";break;case"snowy-rainy":n="F067F";break;case"sunny":n="F0599";break;case"windy":n="F059D";break;case"windy-variant":n="F059E";break;default:n="F0599"}const h=983040+parseInt(n.slice(1),16),d=String.fromCodePoint(h);t.innerText=d,t.style.fontSize=`${c}px`,t.style.color=e(o),t.style.fontFamily="MDI, system-ui, -apple-system, BlinkMacSystemFont, -sans-serif",t.style.lineHeight="1",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center"},F=(t,i)=>{const{lines:e,addFont:r,getColorConst:n,getCondProps:c,getConditionCheck:o}=i,a=t.props||{},s=(t.entity_id||a.weather_entity||"weather.forecast_home").trim(),h=parseInt(a.size||48,10),d=a.color||"black",p=n(d),l=r("Material Design Icons",400,h);e.push(`        // widget:weather_icon id:${t.id} type:weather_icon x:${t.x} y:${t.y} w:${t.width} h:${t.height} entity:${s} size:${h} color:${d} ${c(t)}`);const f=o(t);if(f&&e.push(`        ${f}`),s){const u=s.replace(/[^a-zA-Z0-9_]/g,"_")+"_text_sensor";e.push("        {"),e.push(`          std::string raw_state = id(${u}).state;`),e.push('          std::string weather_state = "";'),e.push("          for(auto &c : raw_state) weather_state += tolower(c);"),e.push('          const char* icon = "\\U000F0599"; // Default: sunny'),e.push('          if (weather_state == "clear-night") icon = "\\U000F0594";'),e.push('          else if (weather_state == "cloudy") icon = "\\U000F0590";'),e.push('          else if (weather_state == "exceptional") icon = "\\U000F0026";'),e.push('          else if (weather_state == "fog") icon = "\\U000F0591";'),e.push('          else if (weather_state == "hail") icon = "\\U000F0592";'),e.push('          else if (weather_state == "lightning") icon = "\\U000F0593";'),e.push('          else if (weather_state == "lightning-rainy") icon = "\\U000F067E";'),e.push('          else if (weather_state == "partlycloudy") icon = "\\U000F0595";'),e.push('          else if (weather_state == "pouring") icon = "\\U000F0596";'),e.push('          else if (weather_state == "rainy") icon = "\\U000F0597";'),e.push('          else if (weather_state == "snowy") icon = "\\U000F0598";'),e.push('          else if (weather_state == "snowy-rainy") icon = "\\U000F067F";'),e.push('          else if (weather_state == "sunny") icon = "\\U000F0599";'),e.push('          else if (weather_state == "windy") icon = "\\U000F059D";'),e.push('          else if (weather_state == "windy-variant") icon = "\\U000F059E";'),e.push('          else if (weather_state != "" && weather_state != "unknown") ESP_LOGW("weather", "Unhandled weather state: %s", raw_state.c_str());'),e.push(`          it.printf(${t.x}, ${t.y}, id(${l}), ${p}, "%s", icon);`),e.push("        }")}else e.push(`        it.printf(${t.x}, ${t.y}, id(${l}), ${p}, "\\U000F0595");`);f&&e.push("        }")},w=t=>{const{lines:i,widgets:e,isLvgl:r,pendingTriggers:n}=t;if(!e||e.length===0)return;const c=new Set;for(const o of e){if(o.type!=="weather_icon")continue;const a=(o.entity_id||o.props?.weather_entity||"weather.forecast_home").trim();a&&c.add({id:o.id,entity_id:a})}c.forEach(({id:o,entity_id:a})=>{const s=a.replace(/[^a-zA-Z0-9_]/g,"_")+"_text_sensor";r&&n&&(n.has(s)||n.set(s,new Set),n.get(s).add(`- lvgl.widget.refresh: ${o}`));const h=!!i.length;t.seenSensorIds&&!t.seenSensorIds.has(s)&&(h||(i.push(""),i.push("# Weather Condition Sensors (Detected from Weather Icon)")),t.seenSensorIds.add(s),i.push("- platform: homeassistant"),i.push(`  id: ${s}`),i.push(`  entity_id: ${a}`),i.push("  internal: true"))})},_=(t,{trackIcon:i})=>{const r=(t.props||{}).size||48;["F0594","F0590","F0026","F0591","F0592","F0593","F067E","F0595","F0596","F0597","F0598","F067F","F0599","F059D","F059E"].forEach(n=>i(n,r))},g={id:"weather_icon",name:"Weather Icon",category:"Sensors",defaults:{width:60,height:60,size:48,color:"black",background_color:"transparent",weather_entity:"weather.forecast_home",fit_icon_to_frame:!0},render:y,exportLVGL:(t,{common:i,convertColor:e,getLVGLFont:r})=>{const n=t.props||{},c=(t.entity_id||n.weather_entity||"weather.forecast_home").trim(),o=parseInt(n.size||48,10),a=e(n.color||"black");let s='"\\U000F0599"';if(c){const h=c.replace(/[^a-zA-Z0-9_]/g,"_")+"_text_sensor";s=`!lambda |-
`,s+=`              std::string ws = id(${h}).state;
`,s+=`              if (ws == "clear-night") return "\\U000F0594";
`,s+=`              if (ws == "cloudy") return "\\U000F0590";
`,s+=`              if (ws == "exceptional") return "\\U000F0026";
`,s+=`              if (ws == "fog") return "\\U000F0591";
`,s+=`              if (ws == "hail") return "\\U000F0592";
`,s+=`              if (ws == "lightning") return "\\U000F0593";
`,s+=`              if (ws == "lightning-rainy") return "\\U000F067E";
`,s+=`              if (ws == "partlycloudy") return "\\U000F0595";
`,s+=`              if (ws == "pouring") return "\\U000F0596";
`,s+=`              if (ws == "rainy") return "\\U000F0597";
`,s+=`              if (ws == "snowy") return "\\U000F0598";
`,s+=`              if (ws == "snowy-rainy") return "\\U000F067F";
`,s+=`              if (ws == "sunny") return "\\U000F0599";
`,s+=`              if (ws == "windy") return "\\U000F059D";
`,s+=`              if (ws == "windy-variant") return "\\U000F059E";
`,s+='              return "\\U000F0599";'}return{label:{...i,text:s,text_font:r("Material Design Icons",o,400),text_color:a,text_align:"center"}}},collectRequirements:_,onExportTextSensors:w,export:F};export{g as default};

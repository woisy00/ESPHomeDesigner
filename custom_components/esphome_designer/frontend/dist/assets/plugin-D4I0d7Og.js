const F=(e,s,{getColorStyle:t})=>{const a=s.props||{},r=a.color||"black",n=a.icon_size||24,l=a.border_thickness||0;e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="space-around",e.style.padding="0 10px",e.style.boxSizing="border-box";let p=t(r);if(e.style.overflow="hidden",a.show_background){const i=t(a.background_color||"white");e.style.backgroundColor=i,e.style.borderRadius=(a.border_radius||8)+"px",l>0?e.style.border=`${l}px solid ${t(a.border_color||"white")}`:e.style.border="none",p==="#000000"&&i==="#000000"&&(p="#ffffff"),(!a.background_color||a.background_color==="transparent")&&(e.style.border="1px dashed #444")}else e.style.backgroundColor="transparent",e.style.borderRadius="0",e.style.border="none";e.style.color=p;const h=[];a.show_prev!==!1&&h.push({type:"prev",icon:"F0141"}),a.show_home!==!1&&h.push({type:"home",icon:"F02DC"}),a.show_next!==!1&&h.push({type:"next",icon:"F0142"}),e.innerHTML="",h.forEach(i=>{const o=document.createElement("span"),d=parseInt(i.icon,16);o.innerText=String.fromCodePoint(d),o.style.fontFamily="'Material Design Icons', 'MDI', system-ui, -sans-serif",o.style.fontSize=n+"px",o.style.lineHeight="1",o.style.cursor="pointer",o.style.padding="5px",o.style.transition="transform 0.1s",o.onmousedown=()=>o.style.transform="scale(0.9)",o.onmouseup=()=>o.style.transform="scale(1)",o.onmouseleave=()=>o.style.transform="scale(1)",e.appendChild(o)})},R=(e,s)=>{const{lines:t,addFont:a,getColorConst:r,addDitherMask:n,getCondProps:l,getConditionCheck:p,isEpaper:h}=s,i=e.props||{},o=parseInt(i.icon_size||24,10),d=i.color||"white",_=r(d),f=i.show_prev!==!1,u=i.show_home!==!1,x=i.show_next!==!1,m=i.show_background!==!1,b=r(i.background_color||"black"),g=parseInt(i.border_radius||8,10),c=parseInt(i.border_thickness||0,10),v=r(i.border_color||"white"),k=a("Material Design Icons",400,o);t.push(`        // widget:template_nav_bar id:${e.id} type:template_nav_bar x:${e.x} y:${e.y} w:${e.width} h:${e.height} prev:${f} home:${u} next:${x} bg:${m} bg_color:${i.background_color||"black"} radius:${g} border:${c} icon_size:${o} color:${d} ${l(e)}`);const C=p(e);C&&t.push(`        ${C}`),t.push("        {"),m&&(g>0?(t.push("          auto draw_filled_rrect = [&](int x, int y, int w, int h, int r, auto c) {"),t.push("            it.filled_rectangle(x + r, y, w - 2 * r, h, c);"),t.push("            it.filled_rectangle(x, y + r, r, h - 2 * r, c);"),t.push("            it.filled_rectangle(x + w - r, y + r, r, h - 2 * r, c);"),t.push("            it.filled_circle(x + r, y + r, r, c);"),t.push("            it.filled_circle(x + w - r - 1, y + r, r, c);"),t.push("            it.filled_circle(x + r, y + h - r - 1, r, c);"),t.push("            it.filled_circle(x + w - r - 1, y + h - r - 1, r, c);"),t.push("          };"),c>0?(t.push(`          draw_filled_rrect(${e.x}, ${e.y}, ${e.width}, ${e.height}, ${g}, ${v});`),t.push(`          draw_filled_rrect(${e.x+c}, ${e.y+c}, ${e.width-2*c}, ${e.height-2*c}, ${Math.max(0,g-c)}, ${b});`)):t.push(`          draw_filled_rrect(${e.x}, ${e.y}, ${e.width}, ${e.height}, ${g}, ${b});`)):c>0?(t.push(`          it.filled_rectangle(${e.x}, ${e.y}, ${e.width}, ${e.height}, ${v});`),t.push(`          it.filled_rectangle(${e.x+c}, ${e.y+c}, ${e.width-2*c}, ${e.height-2*c}, ${b});`)):t.push(`          it.filled_rectangle(${e.x}, ${e.y}, ${e.width}, ${e.height}, ${b});`),n(t,i.background_color||"black",h,e.x,e.y,e.width,e.height));let $=0;if(f&&$++,u&&$++,x&&$++,$>0){const E=e.width/$;let y=e.x+E/2;const w=e.y+e.height/2;f&&(t.push(`          it.printf(${Math.round(y)}, ${w}, id(${k}), ${_}, TextAlign::CENTER, "\\U000F0141");`),y+=E),u&&(t.push(`          it.printf(${Math.round(y)}, ${w}, id(${k}), ${_}, TextAlign::CENTER, "\\U000F02DC");`),y+=E),x&&t.push(`          it.printf(${Math.round(y)}, ${w}, id(${k}), ${_}, TextAlign::CENTER, "\\U000F0142");`)}n(t,d,h,e.x,e.y,e.width,e.height),t.push("        }"),C&&t.push("        }")},T=e=>{const{lines:s,widgets:t,profile:a}=e;if(!a||!a.touch)return;const r=t.filter(n=>n.type==="template_nav_bar");r.length!==0&&r.forEach(n=>{const l=n.props||{},p=l.show_prev!==!1,h=l.show_home!==!1,i=l.show_next!==!1;let o=0;if(p&&o++,h&&o++,i&&o++,o>0){const d=Math.floor(n.width/o);let _=0;const f=u=>{const x=n.x+_*d,m=x+d,b=n.y,g=n.y+n.height;s.push("  - platform: touchscreen"),s.push(`    id: nav_${u}_${n.id.replace(/-/g,"_")}`),s.push("    touchscreen_id: my_touchscreen"),s.push(`    x_min: ${x}`),s.push(`    x_max: ${m}`),s.push(`    y_min: ${b}`),s.push(`    y_max: ${g}`),s.push("    on_press:");const c=n._pageIndex!==void 0?n._pageIndex:0;s.push("      - if:"),s.push("          condition:"),s.push(`            lambda: 'return id(display_page) == ${c};'`),s.push("          then:"),u==="prev"?(s.push("            - script.execute:"),s.push("                id: change_page_to"),s.push("                target_page: !lambda 'return id(display_page) - 1;'")):u==="home"?s.push("            - script.execute: manage_run_and_sleep"):u==="next"&&(s.push("            - script.execute:"),s.push("                id: change_page_to"),s.push("                target_page: !lambda 'return id(display_page) + 1;'")),_++};p&&f("prev"),h&&f("home"),i&&f("next")}})},N={id:"template_nav_bar",name:"Nav Bar",category:"Templates",defaults:{w:180,h:40,show_prev:!0,show_home:!0,show_next:!0,show_background:!0,background_color:"black",border_radius:8,color:"white",icon_size:24},render:F,exportLVGL:(e,{common:s,convertColor:t,getLVGLFont:a})=>{const r=e.props||{},n=parseInt(r.icon_size||24,10),l=t(r.color||"white"),p=r.show_prev!==!1,h=r.show_home!==!1,i=r.show_next!==!1,o=[],d={width:n+16,height:"100%",bg_opa:"TRANSP",border_width:0,radius:0,pad_all:0,layout:{type:"FLEX",flex_align_main:"CENTER",flex_align_cross:"CENTER"}},_=a("Material Design Icons",n,400);return p&&o.push({button:{...d,on_click:[{"script.execute":{id:"change_page_to",target_page:"!lambda 'return id(display_page) - 1;'"}}],widgets:[{label:{align:"CENTER",text:'"\\U000F0141"',text_font:_,text_color:l}}]}}),h&&o.push({button:{...d,on_click:[{"script.execute":"manage_run_and_sleep"}],widgets:[{label:{align:"CENTER",text:'"\\U000F02DC"',text_font:_,text_color:l}}]}}),i&&o.push({button:{...d,on_click:[{"script.execute":{id:"change_page_to",target_page:"!lambda 'return id(display_page) + 1;'"}}],widgets:[{label:{align:"CENTER",text:'"\\U000F0142"',text_font:_,text_color:l}}]}}),{obj:{...s,bg_color:r.show_background!==!1?t(r.background_color||"black"):"TRANSP",bg_opa:r.show_background!==!1?"COVER":"TRANSP",radius:r.border_radius||8,border_width:r.border_thickness||0,border_color:t(r.border_color||"white"),layout:{type:"FLEX",flex_flow:"ROW",flex_align_main:"SPACE_AROUND",flex_align_cross:"CENTER"},widgets:o}}},export:R,onExportBinarySensors:T,collectRequirements:(e,s)=>{const{trackIcon:t,addFont:a}=s,r=e.props||{},n=parseInt(r.icon_size||24,10);a("Material Design Icons",400,n),r.show_prev!==!1&&t("F0141",n),r.show_home!==!1&&t("F02DC",n),r.show_next!==!1&&t("F0142",n)}};export{N as default};

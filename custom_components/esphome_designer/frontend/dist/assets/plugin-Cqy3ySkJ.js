const L=(t,d,{getColorStyle:r})=>{const o=d.props||{},e=parseInt(o.radius||10,10),b=parseInt(o.border_width||4,10),s=o.color||"theme_auto";t.style.backgroundColor=o.fill?r(s):"transparent";const f=o.fill&&(o.show_border===!1||o.show_border==="false")?r(s):r(o.border_color||(o.fill?"black":s));t.style.border=`${b}px solid ${f}`,t.style.borderRadius=`${e}px`,t.style.boxSizing="border-box",o.opacity!==void 0&&o.opacity<100&&(t.style.opacity=o.opacity/100)},P=(t,{common:d,convertColor:r,formatOpacity:o})=>{const e=t.props||{};return{obj:{...d,bg_color:r(e.bg_color||e.color),bg_opa:e.fill!==!1?"cover":"transp",border_width:e.border_width,border_color:r(e.border_color||e.color),radius:e.radius||10,opa:o(e.opa)}}},R={id:"rounded_rect",name:"Rounded Rectangle",category:"Shapes",supportedModes:["lvgl","direct","oepl","opendisplay"],defaults:{width:100,height:100,radius:10,fill:!1,border_width:4,color:"theme_auto",bg_color:"theme_auto",border_color:"theme_auto",show_border:!0,opa:255},render:L,exportOpenDisplay:(t,{layout:d,page:r})=>{const o=t.props||{};return{type:"draw_rect",x:Math.round(t.x),y:Math.round(t.y),w:Math.round(t.width),h:Math.round(t.height),fill:o.fill?o.bg_color||o.color||"black":null,outline:o.border_color||o.color||"black",width:o.border_width||1,radius:o.radius||0}},exportOEPL:(t,{layout:d,page:r})=>{const o=t.props||{};return{type:"rectangle",x_start:Math.round(t.x),y_start:Math.round(t.y),x_end:Math.round(t.x+t.width),y_end:Math.round(t.y+t.height),fill:o.fill?o.bg_color||o.color||"black":null,outline:o.border_color||o.color||"black",width:o.border_width||1,radius:o.radius||0}},exportLVGL:P,export:(t,d)=>{const{lines:r,getColorConst:o,addDitherMask:e,getCondProps:b,getConditionCheck:s,RECT_Y_OFFSET:f,isEpaper:$}=d,i=t.props||{},g=!!i.fill,m=i.show_border!==!1,c=parseInt(i.radius||10,10),l=parseInt(i.border_width||4,10),a=i.color||"theme_auto",w=i.border_color||(g?"black":a),I=o(a),E=o(w),h=Math.floor(t.x),p=Math.floor(t.y+(typeof f<"u"?f:0)),n=Math.floor(t.width),u=Math.floor(t.height);r.push(`        // widget:rounded_rect id:${t.id} type:rounded_rect x:${h} y:${p} w:${n} h:${u} fill:${g} show_border:${m} border:${l} radius:${c} color:${a} border_color:${w} ${b(t)}`);const M=s(t);if(M&&r.push(`        ${M}`),r.push("        {"),g){r.push("          auto draw_filled_rrect = [&](int x, int y, int w, int h, int r, auto c) {"),r.push("            it.filled_rectangle(x + r, y, w - 2 * r, h, c);"),r.push("            it.filled_rectangle(x, y + r, r, h - 2 * r, c);"),r.push("            it.filled_rectangle(x + w - r, y + r, r, h - 2 * r, c);"),r.push("            it.filled_circle(x + r, y + r, r, c);"),r.push("            it.filled_circle(x + w - r - 1, y + r, r, c);"),r.push("            it.filled_circle(x + r, y + h - r - 1, r, c);"),r.push("            it.filled_circle(x + w - r - 1, y + h - r - 1, r, c);"),r.push("          };");let k=h,C=p,y=n,x=u,_=c;m&&(r.push(`          draw_filled_rrect(${h}, ${p}, ${n}, ${u}, ${c}, ${E});`),k+=l,C+=l,y-=2*l,x-=2*l,_-=l,_<0&&(_=0)),a.toLowerCase()==="gray"&&$?e(r,a,$,k,C,y,x,_):y>0&&x>0&&r.push(`          draw_filled_rrect(${k}, ${C}, ${y}, ${x}, ${_}, ${I});`)}else r.push("          auto draw_rrect_border = [&](int x, int y, int w, int h, int r, int t, auto c) {"),r.push("            it.filled_rectangle(x + r, y, w - 2 * r, t, c);"),r.push("            it.filled_rectangle(x + r, y + h - t, w - 2 * r, t, c);"),r.push("            it.filled_rectangle(x, y + r, t, h - 2 * r, c);"),r.push("            it.filled_rectangle(x + w - t, y + r, t, h - 2 * r, c);"),r.push("            for (int dx = 0; dx <= r; dx++) {"),r.push("              for (int dy = 0; dy <= r; dy++) {"),r.push("                int ds = dx*dx + dy*dy;"),r.push("                if (ds <= r*r && ds > (r-t)*(r-t)) {"),r.push("                  it.draw_pixel_at(x + r - dx, y + r - dy, c);"),r.push("                  it.draw_pixel_at(x + w - r + dx - 1, y + r - dy, c);"),r.push("                  it.draw_pixel_at(x + r - dx, y + h - r + dy - 1, c);"),r.push("                  it.draw_pixel_at(x + w - r + dx - 1, y + h - r + dy - 1, c);"),r.push("                }"),r.push("              }"),r.push("            }"),r.push("          };"),r.push(`          draw_rrect_border(${h}, ${p}, ${n}, ${u}, ${c}, ${l}, ${E});`);e(r,w,$,h,p,n,u,c),r.push("        }"),M&&r.push("        }")}};export{R as default};

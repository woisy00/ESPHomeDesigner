const P=(o,i,{getColorStyle:r})=>{const t=i.props||{},e=parseInt(t.radius||10,10),x=parseInt(t.border_width||4,10),l=t.color||"black";o.style.backgroundColor=t.fill?r(l):"transparent";const u=t.fill&&(t.show_border===!1||t.show_border==="false")?r(l):r(t.border_color||(t.fill?"black":l));o.style.border=`${x}px solid ${u}`,o.style.borderRadius=`${e}px`,o.style.boxSizing="border-box",t.opacity&&t.opacity<100?o.style.opacity=t.opacity/100:o.style.opacity=1},L=(o,{common:i,convertColor:r,formatOpacity:t})=>{const e=o.props||{};return{obj:{...i,bg_color:r(e.bg_color||e.color),bg_opa:e.fill!==!1?"COVER":"TRANSP",border_width:e.border_width,border_color:r(e.border_color||e.color),radius:e.radius||10,opa:t(e.opa)}}},T={id:"rounded_rect",name:"Rounded Rectangle",category:"Shapes",defaults:{width:100,height:100,radius:10,fill:!1,border_width:4,color:"black",bg_color:"black",border_color:"black",show_border:!0,opa:255},render:P,exportLVGL:L,export:(o,i)=>{const{lines:r,getColorConst:t,addDitherMask:e,getCondProps:x,getConditionCheck:l,RECT_Y_OFFSET:u,isEpaper:$}=i,s=o.props||{},w=!!s.fill,M=s.show_border!==!1,_=parseInt(s.radius||10,10),d=parseInt(s.border_width||4,10),c=s.color||"black",g=s.border_color||(w?"black":c),I=t(c),E=t(g),a=Math.floor(o.x),p=Math.floor(o.y+(typeof u<"u"?u:0)),h=Math.floor(o.width),n=Math.floor(o.height);r.push(`        // widget:rounded_rect id:${o.id} type:rounded_rect x:${a} y:${p} w:${h} h:${n} fill:${w} show_border:${M} border:${d} radius:${_} color:${c} border_color:${g} ${x(o)}`);const k=l(o);if(k&&r.push(`        ${k}`),r.push("        {"),w){r.push("          auto draw_filled_rrect = [&](int x, int y, int w, int h, int r, auto c) {"),r.push("            it.filled_rectangle(x + r, y, w - 2 * r, h, c);"),r.push("            it.filled_rectangle(x, y + r, r, h - 2 * r, c);"),r.push("            it.filled_rectangle(x + w - r, y + r, r, h - 2 * r, c);"),r.push("            it.filled_circle(x + r, y + r, r, c);"),r.push("            it.filled_circle(x + w - r - 1, y + r, r, c);"),r.push("            it.filled_circle(x + r, y + h - r - 1, r, c);"),r.push("            it.filled_circle(x + w - r - 1, y + h - r - 1, r, c);"),r.push("          };");let C=a,R=p,f=h,y=n,b=_;M&&(r.push(`          draw_filled_rrect(${a}, ${p}, ${h}, ${n}, ${_}, ${E});`),C+=d,R+=d,f-=2*d,y-=2*d,b-=d,b<0&&(b=0)),c.toLowerCase()==="gray"&&$?e(r,c,$,C,R,f,y):f>0&&y>0&&r.push(`          draw_filled_rrect(${C}, ${R}, ${f}, ${y}, ${b}, ${I});`)}else r.push("          auto draw_rrect_border = [&](int x, int y, int w, int h, int r, int t, auto c) {"),r.push("            it.filled_rectangle(x + r, y, w - 2 * r, t, c);"),r.push("            it.filled_rectangle(x + r, y + h - t, w - 2 * r, t, c);"),r.push("            it.filled_rectangle(x, y + r, t, h - 2 * r, c);"),r.push("            it.filled_rectangle(x + w - t, y + r, t, h - 2 * r, c);"),r.push("            for (int dx = 0; dx <= r; dx++) {"),r.push("              for (int dy = 0; dy <= r; dy++) {"),r.push("                int ds = dx*dx + dy*dy;"),r.push("                if (ds <= r*r && ds > (r-t)*(r-t)) {"),r.push("                  it.draw_pixel_at(x + r - dx, y + r - dy, c);"),r.push("                  it.draw_pixel_at(x + w - r + dx - 1, y + r - dy, c);"),r.push("                  it.draw_pixel_at(x + r - dx, y + h - r + dy - 1, c);"),r.push("                  it.draw_pixel_at(x + w - r + dx - 1, y + h - r + dy - 1, c);"),r.push("                }"),r.push("              }"),r.push("            }"),r.push("          };"),r.push(`          draw_rrect_border(${a}, ${p}, ${h}, ${n}, ${_}, ${d}, ${E});`);e(r,g,$,a,p,h,n),r.push("        }"),k&&r.push("        }")}};export{T as default};

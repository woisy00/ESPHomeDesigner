const m=(e,o,{getColorStyle:i})=>{const n=o.props||{},l=n.url||n.path||"",r=!!n.invert;if(e.style.boxSizing="border-box",e.style.backgroundColor="#f5f5f5",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.overflow="hidden",e.style.color="#666",e.innerText="",e.style.backgroundImage="",l){const t=document.createElement("img");t.style.maxWidth="100%",t.style.maxHeight="100%",t.style.objectFit="contain",t.draggable=!1,r&&(t.style.filter="invert(1)"),t.onerror=()=>{e.innerHTML="<div style='text-align:center;color:#666;font-size:11px;padding:8px;line-height:1.4;'>üñºÔ∏è<br/><strong>Online Image</strong><br/><span style='color:#999;font-size:9px;'>"+(r?"(inverted) ":"")+"Load Failed</span></div>"},t.onload=()=>{const a=l.split("/").pop(),s=document.createElement("div");s.style.position="absolute",s.style.bottom="2px",s.style.right="2px",s.style.background="rgba(0,0,0,0.6)",s.style.color="white",s.style.padding="2px 4px",s.style.fontSize="8px",s.style.borderRadius="2px",s.textContent=a,e.appendChild(s)},t.src=l,e.appendChild(t)}else{const t=document.createElement("div");t.style.textAlign="center",t.style.color="#aaa",t.style.fontSize="11px",t.innerHTML="üñºÔ∏è<br/>Online Image<br/><span style='font-size:9px;color:#ccc;'>Enter URL in properties ‚Üí</span>",e.appendChild(t)}},x=(e,{common:o,convertColor:i})=>{const n=e.props||{};let l=n.src||n.path||n.url||"symbol_image";return{img:{...o,src:l,angle:n.rotation||0,pivot_x:n.pivot_x||0,pivot_y:n.pivot_y||0,image_recolor:i(n.color),image_recolor_opa:"COVER"}}},g=e=>`online_img_${e.id.replace(/-/g,"_")}`,_=(e,o)=>{const{lines:i,getCondProps:n,getConditionCheck:l}=o,r=e.props||{},t=(r.url||"").trim(),a=!!r.invert,s=r.render_mode||"Auto",d=g(e);i.push(`        // widget:${e.type} id:${e.id} x:${e.x} y:${e.y} w:${e.width} h:${e.height} url:"${t}" invert:${a} render_mode:"${s}" ${n(e)}`);const c=l(e);c&&i.push(`        ${c}`),a?i.push(`        it.image(${e.x}, ${e.y}, id(${d}), color_off, color_on);`):i.push(`        it.image(${e.x}, ${e.y}, id(${d}));`),c&&i.push("        }")},$=e=>{const{lines:o,widgets:i,profile:n}=e,l=i.filter(r=>r.type==="online_image"||r.type==="puppet");l.length>0&&(o.push("online_image:"),l.forEach(r=>{const t=r.props||{},a=(t.url||"").trim(),s=g(r);if(!a)return;let d=(t.format||"PNG").toUpperCase();d==="JPG"&&(d="JPEG");const c=t.render_mode||"Auto";let p="GRAYSCALE";c==="Binary"?p="BINARY":c==="Grayscale"?p="GRAYSCALE":c==="Color (RGB565)"?p="RGB565":p=n.features?.lcd||n.name&&(n.name.includes("6-Color")||n.name.includes("Color"))?"RGB565":"BINARY";let u=t.update_interval||"never";if(t.interval_s&&t.interval_s>0&&(u=`${t.interval_s}s`),o.push(`  - id: ${s}`),o.push(`    url: "${a}"`),o.push(`    format: ${d}`),o.push(`    type: ${p}`),p!=="BINARY"){const y=parseInt(r.width,10),f=parseInt(r.height,10);o.push(`    resize: ${y}x${f}`)}o.push(`    update_interval: ${u}`),(p==="BINARY"||p==="GRAYSCALE")&&o.push("    dither: FLOYDSTEINBERG");const h=n.features?.lcd?"my_display":"epaper_display";o.push("    on_download_finished:"),o.push("      then:"),o.push(`        - component.update: ${h}`),o.push("    on_error:"),o.push("      then:"),o.push(`        - component.update: ${h}`)}),o.push(""))},v={id:"online_image",name:"Online Image",category:"Graphics",defaults:{url:"",invert:!1,update_interval:"1h",rotation:0,color:"black"},render:m,exportLVGL:x,export:_,onExportComponents:$};export{v as default};

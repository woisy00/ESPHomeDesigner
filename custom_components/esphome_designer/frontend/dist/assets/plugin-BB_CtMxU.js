const U=(t,i,{getColorStyle:e})=>{const a=i.props||{};let n="F0595",r=a.size||24;const c=a.color||"theme_auto";let o="sunny";const s=i.entity_id||a.weather_entity||"weather.forecast_home";if(window.AppState&&window.AppState.entityStates){const u=window.AppState.entityStates[s],h=u&&u.state!==void 0?u.state:null;h!=null&&(o=String(h).toLowerCase())}if(a.fit_icon_to_frame){const h=Math.max(8,Math.min((i.width||0)-8,(i.height||0)-8));r=Math.round(h)}switch(o){case"clear-night":n="F0594";break;case"cloudy":n="F0590";break;case"exceptional":n="F0026";break;case"fog":n="F0591";break;case"hail":n="F0592";break;case"lightning":n="F0593";break;case"lightning-rainy":n="F067E";break;case"partlycloudy":n="F0595";break;case"pouring":n="F0596";break;case"rainy":n="F0597";break;case"snowy":n="F0598";break;case"snowy-rainy":n="F067F";break;case"sunny":n="F0599";break;case"windy":n="F059D";break;case"windy-variant":n="F059E";break;default:n="F0599"}const p=983040+parseInt(n.slice(1),16),d=String.fromCodePoint(p);t.innerText=d,t.style.fontSize=`${r}px`,t.style.color=e(c),t.style.fontFamily="MDI, system-ui, -apple-system, BlinkMacSystemFont, -sans-serif",t.style.lineHeight="1",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center"},x=(t,i)=>{const{lines:e,addFont:a,getColorConst:n,getCondProps:r,getConditionCheck:c}=i,o=t.props||{},s=(t.entity_id||o.weather_entity||"weather.forecast_home").trim(),p=parseInt(o.size||48,10),d=o.color||"theme_auto",u=n(d),h=a("Material Design Icons",400,p);e.push(`        // widget:weather_icon id:${t.id} type:weather_icon x:${t.x} y:${t.y} w:${t.width} h:${t.height} entity:${s} size:${p} color:${d} ${r(t)}`);const l=c(t);if(l&&e.push(`        ${l}`),s){const g=((S,w="")=>{let f=S.replace(/[^a-zA-Z0-9_]/g,"_");const _=63-w.length;return f.length>_&&(f=f.substring(0,_)),f+w})(s,"_txt"),F=Math.round(t.x+t.width/2),m=Math.round(t.y+t.height/2);e.push("        {"),e.push(`          std::string raw_state = id(${g}).state;`),e.push('          std::string weather_state = "";'),e.push("          for(auto &c : raw_state) weather_state += tolower(c);"),e.push('          const char* icon = "\\U000F0599"; // Default: sunny'),e.push('          if (weather_state == "clear-night") icon = "\\U000F0594";'),e.push('          else if (weather_state == "cloudy") icon = "\\U000F0590";'),e.push('          else if (weather_state == "exceptional") icon = "\\U000F0026";'),e.push('          else if (weather_state == "fog") icon = "\\U000F0591";'),e.push('          else if (weather_state == "hail") icon = "\\U000F0592";'),e.push('          else if (weather_state == "lightning") icon = "\\U000F0593";'),e.push('          else if (weather_state == "lightning-rainy") icon = "\\U000F067E";'),e.push('          else if (weather_state == "partlycloudy") icon = "\\U000F0595";'),e.push('          else if (weather_state == "pouring") icon = "\\U000F0596";'),e.push('          else if (weather_state == "rainy") icon = "\\U000F0597";'),e.push('          else if (weather_state == "snowy") icon = "\\U000F0598";'),e.push('          else if (weather_state == "snowy-rainy") icon = "\\U000F067F";'),e.push('          else if (weather_state == "sunny") icon = "\\U000F0599";'),e.push('          else if (weather_state == "windy") icon = "\\U000F059D";'),e.push('          else if (weather_state == "windy-variant") icon = "\\U000F059E";'),e.push('          else if (weather_state != "" && weather_state != "unknown") ESP_LOGW("weather", "Unhandled weather state: %s", raw_state.c_str());'),e.push(`          it.printf(${F}, ${m}, id(${h}), ${u}, TextAlign::CENTER, "%s", icon);`),e.push("        }")}else{const y=Math.round(t.x+t.width/2),g=Math.round(t.y+t.height/2);e.push(`        it.printf(${y}, ${g}, id(${h}), ${u}, TextAlign::CENTER, "\\U000F0595");`)}l&&e.push("        }")},I=t=>{const{lines:i,widgets:e,isLvgl:a,pendingTriggers:n}=t;if(!e||e.length===0)return;const r=new Set;for(const c of e){if(c.type!=="weather_icon")continue;const o=(c.entity_id||c.props?.weather_entity||"weather.forecast_home").trim();o&&r.add({id:c.id,entity_id:o})}r.forEach(({id:c,entity_id:o})=>{const p=((u,h="")=>{let l=u.replace(/[^a-zA-Z0-9_]/g,"_");const y=63-h.length;return l.length>y&&(l=l.substring(0,y)),l+h})(o,"_txt");a&&n&&(n.has(p)||n.set(p,new Set),n.get(p).add(`- lvgl.widget.refresh: ${c}`));const d=!!i.length;t.seenSensorIds&&!t.seenSensorIds.has(p)&&(d||(i.push(""),i.push("# Weather Condition Sensors (Detected from Weather Icon)")),t.seenSensorIds.add(p),i.push("- platform: homeassistant"),i.push(`  id: ${p}`),i.push(`  entity_id: ${o}`),i.push("  internal: true"))})},k=(t,{trackIcon:i})=>{const a=(t.props||{}).size||48;["F0594","F0590","F0026","F0591","F0592","F0593","F067E","F0595","F0596","F0597","F0598","F067F","F0599","F059D","F059E"].forEach(n=>i(n,a))},$={id:"weather_icon",name:"Weather Icon",category:"Sensors",supportedModes:["lvgl","direct","oepl","opendisplay"],defaults:{width:60,height:60,size:48,color:"theme_auto",background_color:"transparent",weather_entity:"weather.forecast_home",fit_icon_to_frame:!0},render:U,exportOpenDisplay:(t,{layout:i,page:e})=>{const a=t.props||{},n=(t.entity_id||a.weather_entity||"weather.forecast_home").trim();let r="sunny";if(n&&window.AppState&&window.AppState.entityStates){const s=window.AppState.entityStates[n];s&&s.state&&(r=String(s.state).toLowerCase())}return{type:"draw_icon",value:{"clear-night":"moon",cloudy:"cloud",fog:"fog",hail:"hail",lightning:"lightning","lightning-rainy":"lightning-rainy",partlycloudy:"partly-cloudy",pouring:"pouring",rainy:"rainy",snowy:"snowy","snowy-rainy":"snowy-rainy",sunny:"sun",windy:"wind"}[r]||"sun",x:Math.round(t.x),y:Math.round(t.y),size:a.size||48,color:a.color||"theme_auto"}},exportOEPL:(t,{layout:i,page:e})=>{const a=t.props||{},n=(t.entity_id||a.weather_entity||"weather.forecast_home").trim(),r=a.size||48,c=a.color||"theme_auto";return{type:"icon",value:`{{ {
            'clear-night': 'moon',
            'cloudy': 'cloud',
            'fog': 'fog',
            'hail': 'hail',
            'lightning': 'lightning',
            'lightning-rainy': 'lightning-rainy',
            'partlycloudy': 'partly-cloudy',
            'pouring': 'pouring',
            'rainy': 'rainy',
            'snowy': 'snowy',
            'snowy-rainy': 'snowy-rainy',
            'sunny': 'sun',
            'windy': 'wind'
        }[states('${n}')] | default('sun') }}`,x:Math.round(t.x),y:Math.round(t.y),size:r,color:c,anchor:"lt"}},exportLVGL:(t,{common:i,convertColor:e,getLVGLFont:a})=>{const n=t.props||{},r=(t.entity_id||n.weather_entity||"weather.forecast_home").trim(),c=parseInt(n.size||48,10),o=e(n.color||"theme_auto");let s='"\\U000F0599"';if(r){const d=((u,h="")=>{let l=u.replace(/[^a-zA-Z0-9_]/g,"_");const y=63-h.length;return l.length>y&&(l=l.substring(0,y)),l+h})(r,"_txt");s=`!lambda |-
`,s+=`              std::string ws = id(${d}).state;
`,s+=`              if (ws == "clear-night") return "\\U000F0594";
`,s+=`              if (ws == "cloudy") return "\\U000F0590";
`,s+=`              if (ws == "exceptional") return "\\U000F0026";
`,s+=`              if (ws == "fog") return "\\U000F0591";
`,s+=`              if (ws == "hail") return "\\U000F0592";
`,s+=`              if (ws == "lightning") return "\\U000F0593";
`,s+=`              if (ws == "lightning-rainy") return "\\U000F067E";
`,s+=`              if (ws == "partlycloudy") return "\\U000F0595";
`,s+=`              if (ws == "pouring") return "\\U000F0596";
`,s+=`              if (ws == "rainy") return "\\U000F0597";
`,s+=`              if (ws == "snowy") return "\\U000F0598";
`,s+=`              if (ws == "snowy-rainy") return "\\U000F067F";
`,s+=`              if (ws == "sunny") return "\\U000F0599";
`,s+=`              if (ws == "windy") return "\\U000F059D";
`,s+=`              if (ws == "windy-variant") return "\\U000F059E";
`,s+='              return "\\U000F0599";'}return{label:{...i,text:s,text_font:a("Material Design Icons",c,400),text_color:o,text_align:"center"}}},collectRequirements:k,onExportTextSensors:I,export:x};export{$ as default};

const L=(o,i,{getColorStyle:r})=>{const t=i.props||{},e=parseInt(t.radius||10,10),x=parseInt(t.border_width||4,10),c=t.color||"black";o.style.backgroundColor=t.fill?r(c):"transparent";const f=t.fill&&(t.show_border===!1||t.show_border==="false")?r(c):r(t.border_color||(t.fill?"black":c));o.style.border=`${x}px solid ${f}`,o.style.borderRadius=`${e}px`,o.style.boxSizing="border-box",t.opacity&&t.opacity<100?o.style.opacity=t.opacity/100:o.style.opacity=1},P=(o,{common:i,convertColor:r,formatOpacity:t})=>{const e=o.props||{};return{obj:{...i,bg_color:r(e.bg_color||e.color),bg_opa:e.fill!==!1?"cover":"transp",border_width:e.border_width,border_color:r(e.border_color||e.color),radius:e.radius||10,opa:t(e.opa)}}},F={id:"rounded_rect",name:"Rounded Rectangle",category:"Shapes",defaults:{width:100,height:100,radius:10,fill:!1,border_width:4,color:"black",bg_color:"black",border_color:"black",show_border:!0,opa:255},render:L,exportLVGL:P,export:(o,i)=>{const{lines:r,getColorConst:t,addDitherMask:e,getCondProps:x,getConditionCheck:c,RECT_Y_OFFSET:f,isEpaper:$}=i,s=o.props||{},w=!!s.fill,I=s.show_border!==!1,l=parseInt(s.radius||10,10),d=parseInt(s.border_width||4,10),a=s.color||"black",g=s.border_color||(w?"black":a),E=t(a),R=t(g),p=Math.floor(o.x),h=Math.floor(o.y+(typeof f<"u"?f:0)),n=Math.floor(o.width),u=Math.floor(o.height);r.push(`        // widget:rounded_rect id:${o.id} type:rounded_rect x:${p} y:${h} w:${n} h:${u} fill:${w} show_border:${I} border:${d} radius:${l} color:${a} border_color:${g} ${x(o)}`);const k=c(o);if(k&&r.push(`        ${k}`),r.push("        {"),w){r.push("          auto draw_filled_rrect = [&](int x, int y, int w, int h, int r, auto c) {"),r.push("            it.filled_rectangle(x + r, y, w - 2 * r, h, c);"),r.push("            it.filled_rectangle(x, y + r, r, h - 2 * r, c);"),r.push("            it.filled_rectangle(x + w - r, y + r, r, h - 2 * r, c);"),r.push("            it.filled_circle(x + r, y + r, r, c);"),r.push("            it.filled_circle(x + w - r - 1, y + r, r, c);"),r.push("            it.filled_circle(x + r, y + h - r - 1, r, c);"),r.push("            it.filled_circle(x + w - r - 1, y + h - r - 1, r, c);"),r.push("          };");let C=p,M=h,y=n,b=u,_=l;I&&(r.push(`          draw_filled_rrect(${p}, ${h}, ${n}, ${u}, ${l}, ${R});`),C+=d,M+=d,y-=2*d,b-=2*d,_-=d,_<0&&(_=0)),a.toLowerCase()==="gray"&&$?e(r,a,$,C,M,y,b,_):y>0&&b>0&&r.push(`          draw_filled_rrect(${C}, ${M}, ${y}, ${b}, ${_}, ${E});`)}else r.push("          auto draw_rrect_border = [&](int x, int y, int w, int h, int r, int t, auto c) {"),r.push("            it.filled_rectangle(x + r, y, w - 2 * r, t, c);"),r.push("            it.filled_rectangle(x + r, y + h - t, w - 2 * r, t, c);"),r.push("            it.filled_rectangle(x, y + r, t, h - 2 * r, c);"),r.push("            it.filled_rectangle(x + w - t, y + r, t, h - 2 * r, c);"),r.push("            for (int dx = 0; dx <= r; dx++) {"),r.push("              for (int dy = 0; dy <= r; dy++) {"),r.push("                int ds = dx*dx + dy*dy;"),r.push("                if (ds <= r*r && ds > (r-t)*(r-t)) {"),r.push("                  it.draw_pixel_at(x + r - dx, y + r - dy, c);"),r.push("                  it.draw_pixel_at(x + w - r + dx - 1, y + r - dy, c);"),r.push("                  it.draw_pixel_at(x + r - dx, y + h - r + dy - 1, c);"),r.push("                  it.draw_pixel_at(x + w - r + dx - 1, y + h - r + dy - 1, c);"),r.push("                }"),r.push("              }"),r.push("            }"),r.push("          };"),r.push(`          draw_rrect_border(${p}, ${h}, ${n}, ${u}, ${l}, ${d}, ${R});`);e(r,g,$,p,h,n,u,l),r.push("        }"),k&&r.push("        }")}};export{F as default};

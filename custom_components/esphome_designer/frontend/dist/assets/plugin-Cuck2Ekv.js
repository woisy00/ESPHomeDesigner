const p=(t,r,{getColorStyle:s})=>{const e=r.props||{},o=s(e.color||"black"),i=s(e.bg_color||"white");t.innerHTML="",t.style.backgroundColor=i,t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center";const d=e.text||"https://github.com/koosoli/ESPHomeDesigner/";try{if(window.qrcode){const c=qrcode(0,"L");c.addData(d),c.make();const a=c.createSvgTag(r.props.scale||4,0),l=document.createElement("div");l.innerHTML=a;const n=l.querySelector("svg");n&&(n.style.width="100%",n.style.height="100%",n.style.fill=o),t.appendChild(l.firstChild)}else t.textContent="QR",t.style.outline="2px solid "+o}catch{t.textContent="QR Error"}},h=(t,{common:r,convertColor:s})=>{const e=t.props||{};let o=`"${e.text||"https://github.com/koosoli/ESPHomeDesigner/"}"`;return t.entity_id&&(o=`!lambda "return id(${t.entity_id.replace(/[^a-zA-Z0-9_]/g,"_")}).state.c_str();"`),{qrcode:{...r,text:o,size:Math.min(r.width,r.height),dark_color:s(e.color),light_color:s(e.bg_color||"white")}}},f=t=>{const{widgets:r,isLvgl:s,pendingTriggers:e}=t;if(r)for(const o of r){if(o.type!=="lvgl_qrcode")continue;const i=(o.entity_id||o.props?.entity_id||"").trim();i&&s&&e&&(e.has(i)||e.set(i,new Set),e.get(i).add(`- lvgl.widget.refresh: ${o.id}`))}},u={id:"lvgl_qrcode",name:"QR Code (lv)",category:"LVGL",defaults:{text:"https://github.com/koosoli/ESPHomeDesigner/",color:"black",bg_color:"white",scale:4},render:p,exportLVGL:h,onExportTextSensors:f};export{u as default};

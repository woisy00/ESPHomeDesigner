const p=(o,e,{getColorStyle:r})=>{const t=e.props||{},a=r(t.color||"black"),s=r(t.bg_color||"gray");o.innerHTML="",o.style.backgroundColor=s,o.style.borderRadius="4px",o.style.overflow="hidden",o.style.position="relative";const n=t.min||0,l=t.max||100,c=t.value!==void 0?t.value:50,d=l-n,u=Math.max(0,Math.min(100,(c-n)/(d||1)*100)),i=document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.height="100%",i.style.width=`${u}%`,i.style.backgroundColor=a,o.appendChild(i)},g=(o,{common:e,convertColor:r})=>{const t=o.props||{};let a=t.value||0;return o.entity_id&&(a=`!lambda "return id(${o.entity_id.replace(/[^a-zA-Z0-9_]/g,"_")}).state;"`),{bar:{...e,min_value:t.min||0,max_value:t.max||100,value:a,bg_color:r(t.bg_color||"gray"),indicator:{bg_color:r(t.color)},start_value:t.start_value,mode:t.mode}}},m=o=>{const{lines:e,widgets:r,isLvgl:t}=o;if(!r)return;const a=new Map;for(const s of r){if(s.type!=="lvgl_bar")continue;const n=(s.entity_id||s.props?.entity_id||"").trim();n&&(a.has(n)||a.set(n,[]),a.get(n).push(s.id))}for(const[s,n]of a){const l=s.replace(/[^a-zA-Z0-9_]/g,"_");if(e.push("- platform: homeassistant"),e.push(`  id: ${l}`),e.push(`  entity_id: ${s}`),e.push("  internal: true"),t){e.push("  on_value:"),e.push("    then:");for(const c of n)e.push("      - lvgl.bar.update:"),e.push(`          id: ${c}`),e.push('          value: !lambda "return x;"')}}},f={id:"lvgl_bar",name:"Bar",category:"LVGL",defaults:{value:50,min:0,max:100,color:"blue",bg_color:"gray",start_value:0,mode:"NORMAL"},render:p,exportLVGL:g,onExportNumericSensors:m};export{f as default};

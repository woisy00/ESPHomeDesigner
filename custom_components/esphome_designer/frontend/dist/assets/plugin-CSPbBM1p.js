const T=(t,l,{getColorStyle:e})=>{const n=l.props||{},h=n.color||"black";let r=n.size||32,o=n.font_size||16,s=n.label_font_size||12;const i=n.unit||"%",a=n.show_label!==!1,_=n.precision??0;let d=45;if(n.fit_icon_to_frame){const c=(l.height||60)-4;r=Math.round(c*.45),o=Math.round(c*.25),s=Math.round(c*.15),r=Math.max(8,r),o=Math.max(8,o),s=Math.max(6,s)}if(!n.is_local_sensor&&l.entity_id&&window.AppState&&window.AppState.entityStates){const $=window.AppState.entityStates[l.entity_id];if($&&$.state!==void 0){const c=parseFloat($.state);isNaN(c)||(d=c)}}let u;d<=30?u="F0E7A":d<=60?u="F058E":u="F058C";const f=983040+parseInt(u.slice(1),16),x=String.fromCodePoint(f);t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="center",t.style.justifyContent="center",t.style.color=e(h);const y=document.createElement("div");y.textContent=x,y.style.fontSize=`${r}px`,y.style.fontFamily="MDI, system-ui, -apple-system, BlinkMacSystemFont, sans-serif",y.style.lineHeight="1",t.appendChild(y);const p=document.createElement("div");if(p.style.fontSize=`${o}px`,p.style.fontWeight="500",p.style.marginTop="2px",p.textContent=d.toFixed(_)+i,t.appendChild(p),a){const $=document.createElement("div");$.style.fontSize=`${s}px`,$.style.opacity="0.7",$.style.marginTop="1px",$.textContent="Humidity",t.appendChild($)}},z={id:"ondevice_humidity",name:"Humidity",category:"SHT4x",defaults:{width:60,height:60,size:32,font_size:16,label_font_size:10,color:"black",unit:"%",show_label:!0,precision:0,fit_icon_to_frame:!0,is_local_sensor:!0},render:T,exportLVGL:(t,{common:l,convertColor:e,getLVGLFont:n,profile:h})=>{const r=t.props||{},o=r.is_local_sensor===!0||r.is_local_sensor!==!1&&!t.entity_id;let s="onboard_humidity";o?h.features&&(s=h.features.sht4x?"sht4x_humidity":h.features.sht3x?"sht3x_humidity":h.features.shtc3?"shtc3_humidity":"onboard_humidity"):(s=(t.entity_id||"").replace(/[^a-zA-Z0-9_]/g,"_"),s||(s="onboard_humidity"));const i=e(r.color||"black"),a=parseInt(r.size||32,10),_=parseInt(r.font_size||16,10),d=parseInt(r.label_font_size||10,10),u=r.unit||"%";let f=`!lambda |-
`;f+=`          if (id(${s}).has_state()) {
`,f+=`            float h = id(${s}).state;
`,f+=`            if (h <= 30) return "\\U000F0E7A";
`,f+=`            if (h <= 60) return "\\U000F058E";
`,f+=`            return "\\U000F058C";
`,f+=`          }
`,f+='          return "\\U000F058E";';let x=`!lambda |-
`;x+=`          if (id(${s}).has_state()) {
`,x+=`            return str_sprintf("%.0f${u}", id(${s}).state).c_str();
`,x+=`          }
`,x+=`          return "--${u}";`;const y=[{label:{width:a+10,height:a+4,align:"TOP_MID",text:f,text_font:n("Material Design Icons",a,400),text_color:i}},{label:{width:"100%",height:_+6,align:"TOP_MID",y:a+2,text:x,text_font:n("Roboto",_,400),text_color:i,text_align:"CENTER"}}];return r.show_label&&y.push({label:{width:"100%",height:d+4,align:"BOTTOM_MID",text:'"Humidity"',text_font:n("Roboto",d,400),text_color:i,text_align:"CENTER",opa:180}}),{obj:{...l,bg_opa:"TRANSP",border_width:0,widgets:y}}},collectRequirements:(t,l)=>{const{trackIcon:e,addFont:n}=l,h=t.props||{},r=parseInt(h.size||32,10),o=parseInt(h.font_size||16,10),s=parseInt(h.label_font_size||10,10);n("Material Design Icons",400,r),n("Roboto",400,o),h.show_label&&n("Roboto",400,s),["F0E7A","F058E","F058C"].forEach(i=>e(i,r))},export:(t,l)=>{const{lines:e,getColorConst:n,getCondProps:h,getConditionCheck:r,addFont:o,profile:s}=l,i=t.props||{},a=n(i.color||"black"),_=i.unit||"%",d=i.size||32,u=i.font_size||16,f=o("Material Design Icons",400,d),x=o("Roboto",400,u),y=i.is_local_sensor===!0||i.is_local_sensor!==!1&&!t.entity_id;let p="onboard_humidity";y?s.features&&(p=s.features.sht4x?"sht4x_humidity":s.features.sht3x?"sht3x_humidity":s.features.shtc3?"shtc3_humidity":"onboard_humidity"):(p=(t.entity_id||"").replace(/[^a-zA-Z0-9_]/g,"_"),p||(p="onboard_humidity")),e.push(`        // widget:ondevice_humidity id:${t.id} type:ondevice_humidity x:${t.x} y:${t.y} w:${t.width} h:${t.height} unit:${_} local:${y} ent:${t.entity_id||""} ${h(t)}`);const $=r(t);$&&e.push(`        ${$}`);const c=`${t.x} + ${t.width} / 2`,m=`${t.y} + ${Math.round(d/2)}`,E=s.features&&(s.features.sht4x||s.features.sht3x||s.features.shtc3),b=y&&E||!!t.entity_id;if(b?(e.push(`        if (id(${p}).has_state()) {`),e.push(`          if (id(${p}).state <= 30) {`),e.push(`            it.printf(${c}, ${m}, id(${f}), ${a}, TextAlign::CENTER, "\\U000F0E7A");`),e.push(`          } else if (id(${p}).state <= 60) {`),e.push(`            it.printf(${c}, ${m}, id(${f}), ${a}, TextAlign::CENTER, "\\U000F058E");`),e.push("          } else {"),e.push(`            it.printf(${c}, ${m}, id(${f}), ${a}, TextAlign::CENTER, "\\U000F058C");`),e.push("          }"),e.push("        } else {"),e.push(`          it.printf(${c}, ${m}, id(${f}), ${a}, TextAlign::CENTER, "\\U000F058E");`),e.push("        }")):(e.push(`          it.printf(${c}, ${m}, id(${f}), ${a}, TextAlign::CENTER, "\\U000F058E");`),e.push(`          it.printf(${c}, ${t.y} + ${d+5}, id(${x}), ${a}, TextAlign::TOP_CENTER, "--${_}");`)),b?(e.push(`        if (id(${p}).has_state()) {`),e.push(`          it.printf(${c}, ${t.y} + ${d+5}, id(${x}), ${a}, TextAlign::TOP_CENTER, "%.0f${_}", id(${p}).state);`),e.push("        } else {"),e.push(`          it.printf(${c}, ${t.y} + ${d+5}, id(${x}), ${a}, TextAlign::TOP_CENTER, "--${_}");`),e.push("        }")):e.push(`          it.printf(${c}, ${t.y} + ${d+5}, id(${x}), ${a}, TextAlign::TOP_CENTER, "--${_}");`),i.show_label){const g=o("Roboto",400,i.label_font_size||10);e.push(`        it.printf(${c}, ${t.y} + ${d+u+8}, id(${g}), ${a}, TextAlign::TOP_CENTER, "Humidity");`)}$&&e.push("        }")},onExportNumericSensors:t=>{const{lines:l,widgets:e,profile:n}=t;if(!e)return;const h=new Set;let r=!1;for(const o of e){if(o.type!=="ondevice_humidity")continue;const s=o.props||{};if(s.is_local_sensor===!0||s.is_local_sensor!==!1&&!o.entity_id){r=!0;continue}let i=(o.entity_id||"").trim();if(i&&(i.includes(".")||(i=`sensor.${i}`),!h.has(i))){h.add(i);const a=i.replace(/[^a-zA-Z0-9_]/g,"_");l.push("- platform: homeassistant",`  id: ${a}`,`  entity_id: ${i}`,"  internal: true")}}if(r&&n.features){const o=!!n.features.sht4x,s=!!n.features.sht3x,i=!!n.features.shtc3;if(o||s||i){const a=o?"sht4x_sensor":s?"sht3x_sensor":"shtc3_sensor",_=o?"sht4x":s?"sht3xd":"shtcx",d=o?"sht4x_humidity":s?"sht3x_humidity":"shtc3_humidity";l.some(u=>u.includes(`id: ${a}`))||(l.push(`- platform: ${_}`,`  id: ${a}`),l.push("  humidity:",`    id: ${d}`,"    internal: true"),l.push("  update_interval: 60s"),_==="shtcx"&&!l.some(u=>u.includes("address: 0x70"))&&(l.push("    address: 0x70"),l.push("    i2c_id: bus_a")),_==="sht3xd"&&!l.some(u=>u.includes("address: 0x44"))&&l.push("    address: 0x44"))}}}};export{z as default};

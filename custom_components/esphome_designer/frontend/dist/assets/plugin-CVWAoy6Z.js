const g=(t,s,{getColorStyle:n})=>{const e=s.props||{},o=n(e.color||"black"),a=n(e.bg_color||"gray");t.innerHTML="",t.style.backgroundColor=a,t.style.borderRadius="4px",t.style.overflow="hidden";const i=e.min||0,l=e.max||100,d=e.value!==void 0?e.value:50,c=l-i,u=Math.max(0,Math.min(100,(d-i)/(c||1)*100)),r=document.createElement("div");r.style.position="absolute",r.style.left="0",r.style.top="0",r.style.height="100%",r.style.width=`${u}%`,r.style.backgroundColor=o,t.appendChild(r)},m=(t,{common:s,convertColor:n})=>{const e=t.props||{};let o=e.value||0;return t.entity_id&&(o=`!lambda "return id(${t.entity_id.replace(/[^a-zA-Z0-9_]/g,"_")}).state;"`),{bar:{...s,min_value:e.min||0,max_value:e.max||100,value:o,bg_color:n(e.bg_color||"gray"),indicator:{bg_color:n(e.color)},start_value:e.mode==="range"?e.start_value:void 0,mode:e.mode}}},p=t=>{const{widgets:s,isLvgl:n,pendingTriggers:e}=t;if(s)for(const o of s){if(o.type!=="lvgl_bar")continue;const a=(o.entity_id||o.props?.entity_id||"").trim();a&&n&&e&&(e.has(a)||e.set(a,new Set),e.get(a).add(`- lvgl.widget.refresh: ${o.id}`))}},b={id:"lvgl_bar",name:"Bar",category:"LVGL",defaults:{value:50,min:0,max:100,color:"blue",bg_color:"gray",start_value:0,mode:"normal"},render:g,exportLVGL:m,onExportNumericSensors:p};export{b as default};

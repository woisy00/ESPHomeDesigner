const Z=(i,a,{getColorStyle:r})=>{const t=a.props||{},e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.style.width="100%",e.style.height="100%";const n=a.width/2,c=a.height/2,N=Math.min(n,c)-10,_=t.min||0,k=t.max||100,S=t.value!==void 0?t.value:_,p=parseInt(t.scale_width||10,10),I=parseInt(t.indicator_width||4,10),y=parseInt(t.tick_count||11,10),x=parseInt(t.tick_length||10,10),g=135,v=270,$=g+v,M=s=>s*(Math.PI/180),o=N-Math.max(p,x)/2,h=(s,l,b)=>s+l*Math.cos(M(b)),w=(s,l,b)=>s+l*Math.sin(M(b)),T=h(n,o,g),C=w(c,o,g),G=h(n,o,$),V=w(c,o,$),P=`M ${T} ${C} A ${o} ${o} 0 1 1 ${G} ${V}`,u=document.createElementNS("http://www.w3.org/2000/svg","path");if(u.setAttribute("d",P),u.setAttribute("fill","none"),u.setAttribute("stroke",r(t.bg_color||"lightgray")),u.setAttribute("stroke-width",p),u.setAttribute("stroke-linecap","round"),e.appendChild(u),y>1){const s=document.createElementNS("http://www.w3.org/2000/svg","g");s.setAttribute("stroke",r(t.color||"black")),s.setAttribute("stroke-width","2px");for(let l=0;l<y;l++){const b=l/(y-1),f=g+v*b,z=h(n,o-p/2,f),H=w(c,o-p/2,f),X=h(n,o-p/2-x,f),Y=w(c,o-p/2-x,f),A=document.createElementNS("http://www.w3.org/2000/svg","line");A.setAttribute("x1",z),A.setAttribute("y1",H),A.setAttribute("x2",X),A.setAttribute("y2",Y),s.appendChild(A)}e.appendChild(s)}let E=0;k>_&&(E=(S-_)/(k-_));const L=g+v*E,R=h(n,o-10,L),W=w(c,o-10,L),d=document.createElementNS("http://www.w3.org/2000/svg","line");d.setAttribute("x1",n),d.setAttribute("y1",c),d.setAttribute("x2",R),d.setAttribute("y2",W),d.setAttribute("stroke",r(t.indicator_color||"red")),d.setAttribute("stroke-width",I),d.setAttribute("stroke-linecap","round"),e.appendChild(d);const m=document.createElementNS("http://www.w3.org/2000/svg","circle");m.setAttribute("cx",n),m.setAttribute("cy",c),m.setAttribute("r",I),m.setAttribute("fill",r(t.indicator_color||"red")),e.appendChild(m),i.innerHTML="",i.appendChild(e),i.style.opacity=(t.opa!==void 0?t.opa:255)/255},j=(i,{common:a,convertColor:r,formatOpacity:t})=>{const e=i.props||{};let n=e.value||0;return i.entity_id&&(n=`!lambda "return id(${i.entity_id.replace(/[^a-zA-Z0-9_]/g,"_")}).state;"`),{meter:{...a,bg_color:r(e.bg_color||"lightgray"),opa:t(e.opa),scales:[{range_from:e.min||0,range_to:e.max||100,indicators:[{needle_line:{value:n,color:r(e.indicator_color||"red"),width:parseInt(e.indicator_width||4,10)}}]}]}}},q=i=>{const{widgets:a,isLvgl:r,pendingTriggers:t}=i;if(a)for(const e of a){if(e.type!=="lvgl_meter")continue;let n=(e.entity_id||e.props?.entity_id||"").trim();n&&(n.includes(".")||(n=`sensor.${n}`),r&&t&&(t.has(n)||t.set(n,new Set),t.get(n).add(`- lvgl.widget.refresh: ${e.id}`)))}},D={id:"lvgl_meter",name:"Meter",category:"LVGL",defaults:{width:140,height:140,value:0,min:0,max:100,bg_color:"lightgray",color:"black",indicator_color:"red",opa:255},render:Z,exportLVGL:j,onExportNumericSensors:q};export{D as default};

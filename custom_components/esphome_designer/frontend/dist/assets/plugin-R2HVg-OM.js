const I=(e,s,{getColorStyle:t})=>{const a=s.props||{},o=a.color||"black",n=a.icon_size||24,c=a.border_thickness||0;e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="space-around",e.style.padding="0 10px",e.style.boxSizing="border-box";let f=t(o);if(e.style.overflow="hidden",a.show_background){const i=t(a.background_color||"white");e.style.backgroundColor=i,e.style.borderRadius=(a.border_radius||8)+"px",c>0?e.style.border=`${c}px solid ${t(a.border_color||"white")}`:e.style.border="none",f==="#000000"&&i==="#000000"&&(f="#ffffff"),(!a.background_color||a.background_color==="transparent")&&(e.style.border="1px dashed #444")}else e.style.backgroundColor="transparent",e.style.borderRadius="0",e.style.border="none";e.style.color=f;const p=[];a.show_prev!==!1&&p.push({type:"prev",icon:"F0141"}),a.show_home!==!1&&p.push({type:"home",icon:"F02DC"}),a.show_next!==!1&&p.push({type:"next",icon:"F0142"}),e.innerHTML="",p.forEach(i=>{const r=document.createElement("span"),d=parseInt(i.icon,16);r.innerText=String.fromCodePoint(d),r.style.fontFamily="'Material Design Icons', 'MDI', system-ui, -sans-serif",r.style.fontSize=n+"px",r.style.lineHeight="1",r.style.cursor="pointer",r.style.padding="5px",r.style.transition="transform 0.1s",r.onmousedown=()=>r.style.transform="scale(0.9)",r.onmouseup=()=>r.style.transform="scale(1)",r.onmouseleave=()=>r.style.transform="scale(1)",e.appendChild(r)})},M=(e,s)=>{const{lines:t,addFont:a,getColorConst:o,addDitherMask:n,getCondProps:c,getConditionCheck:f,isEpaper:p}=s,i=e.props||{},r=parseInt(i.icon_size||24,10),d=i.color||"white",g=o(d),_=i.show_prev!==!1,h=i.show_home!==!1,u=i.show_next!==!1,k=i.show_background!==!1,y=o(i.background_color||"black"),$=parseInt(i.border_radius||8,10),l=parseInt(i.border_thickness||0,10),x=o(i.border_color||"white"),b=a("Material Design Icons",400,r);t.push(`        // widget:template_nav_bar id:${e.id} type:template_nav_bar x:${e.x} y:${e.y} w:${e.width} h:${e.height} prev:${_} home:${h} next:${u} bg:${k} bg_color:${i.background_color||"black"} radius:${$} border:${l} icon_size:${r} color:${d} ${c(e)}`);const w=f(e);w&&t.push(`        ${w}`),t.push("        {"),k&&($>0?(t.push("          auto draw_filled_rrect = [&](int x, int y, int w, int h, int r, auto c) {"),t.push("            it.filled_rectangle(x + r, y, w - 2 * r, h, c);"),t.push("            it.filled_rectangle(x, y + r, r, h - 2 * r, c);"),t.push("            it.filled_rectangle(x + w - r, y + r, r, h - 2 * r, c);"),t.push("            it.filled_circle(x + r, y + r, r, c);"),t.push("            it.filled_circle(x + w - r - 1, y + r, r, c);"),t.push("            it.filled_circle(x + r, y + h - r - 1, r, c);"),t.push("            it.filled_circle(x + w - r - 1, y + h - r - 1, r, c);"),t.push("          };"),l>0?(t.push(`          draw_filled_rrect(${e.x}, ${e.y}, ${e.width}, ${e.height}, ${$}, ${x});`),t.push(`          draw_filled_rrect(${e.x+l}, ${e.y+l}, ${e.width-2*l}, ${e.height-2*l}, ${Math.max(0,$-l)}, ${y});`)):t.push(`          draw_filled_rrect(${e.x}, ${e.y}, ${e.width}, ${e.height}, ${$}, ${y});`)):l>0?(t.push(`          it.filled_rectangle(${e.x}, ${e.y}, ${e.width}, ${e.height}, ${x});`),t.push(`          it.filled_rectangle(${e.x+l}, ${e.y+l}, ${e.width-2*l}, ${e.height-2*l}, ${y});`)):t.push(`          it.filled_rectangle(${e.x}, ${e.y}, ${e.width}, ${e.height}, ${y});`),n(t,i.background_color||"black",p,e.x,e.y,e.width,e.height,$));let m=0;if(_&&m++,h&&m++,u&&m++,m>0){const C=e.width/m;let v=e.x+C/2;const F=e.y+e.height/2;_&&(t.push(`          it.printf(${Math.round(v)}, ${F}, id(${b}), ${g}, TextAlign::CENTER, "\\U000F0141");`),v+=C),h&&(t.push(`          it.printf(${Math.round(v)}, ${F}, id(${b}), ${g}, TextAlign::CENTER, "\\U000F02DC");`),v+=C),u&&t.push(`          it.printf(${Math.round(v)}, ${F}, id(${b}), ${g}, TextAlign::CENTER, "\\U000F0142");`)}n(t,d,p,e.x,e.y,e.width,e.height),t.push("        }"),w&&t.push("        }")},z=e=>{const{lines:s,widgets:t,profile:a}=e;if(!a||!a.touch)return;const o=t.filter(n=>n.type==="template_nav_bar");o.length!==0&&o.forEach(n=>{const c=n.props||{},f=c.show_prev!==!1,p=c.show_home!==!1,i=c.show_next!==!1;let r=0;if(f&&r++,p&&r++,i&&r++,r>0){const d=Math.floor(n.width/r);let g=0;const _=h=>{const u=n.x+g*d,k=u+d,y=n.y,$=n.y+n.height;s.push("- platform: touchscreen"),s.push(`  id: nav_${h}_${n.id.replace(/-/g,"_")}`),s.push("  touchscreen_id: my_touchscreen"),s.push(`  x_min: ${u}`),s.push(`  x_max: ${k}`),s.push(`  y_min: ${y}`),s.push(`  y_max: ${$}`),s.push("  on_press:");const l=n._pageIndex!==void 0?n._pageIndex:0;s.push("    - if:"),s.push("        condition:"),s.push(`          lambda: 'return id(display_page) == ${l};'`),s.push("        then:");let x="";if(h==="prev"?x=c.prev_target||"relative_prev":h==="home"?x=c.home_target||"home":h==="next"&&(x=c.next_target||"relative_next"),x==="home")s.push("          - script.execute: manage_run_and_sleep");else{let b="";x==="relative_prev"?b="!lambda 'return id(display_page) - 1;'":x==="relative_next"?b="!lambda 'return id(display_page) + 1;'":b=x,s.push("          - script.execute:"),s.push("              id: change_page_to"),s.push(`              target_page: ${b}`)}g++};f&&_("prev"),p&&_("home"),i&&_("next")}})},D={id:"template_nav_bar",name:"Nav Bar",category:"Templates",supportedModes:["lvgl","direct"],defaults:{w:180,h:40,show_prev:!0,show_home:!0,show_next:!0,show_background:!0,background_color:"black",border_radius:8,color:"white",icon_size:24},render:I,exportLVGL:(e,{common:s,convertColor:t,getLVGLFont:a})=>{const o=e.props||{},n=parseInt(o.icon_size||24,10),c=t(o.color||"white"),f=o.show_prev!==!1,p=o.show_home!==!1,i=o.show_next!==!1,r=[],d={width:n+16,height:"100%",bg_opa:"transp",border_width:0,radius:0,pad_all:0,layout:{type:"flex",flex_align_main:"center",flex_align_cross:"center"}},g=a("Material Design Icons",n,400),_=h=>{if(h==="home")return[{"script.execute":"manage_run_and_sleep"}];let u="";return h==="relative_prev"?u="!lambda 'return id(display_page) - 1;'":h==="relative_next"?u="!lambda 'return id(display_page) + 1;'":u=h,[{"script.execute":{id:"change_page_to",target_page:u}}]};return f&&r.push({button:{...d,on_click:_(o.prev_target||"relative_prev"),widgets:[{label:{align:"center",text:'"\\U000F0141"',text_font:g,text_color:c}}]}}),p&&r.push({button:{...d,on_click:_(o.home_target||"home"),widgets:[{label:{align:"center",text:'"\\U000F02DC"',text_font:g,text_color:c}}]}}),i&&r.push({button:{...d,on_click:_(o.next_target||"relative_next"),widgets:[{label:{align:"center",text:'"\\U000F0142"',text_font:g,text_color:c}}]}}),{obj:{...s,bg_color:o.show_background!==!1?t(o.background_color||"black"):"transp",bg_opa:o.show_background!==!1?"cover":"transp",radius:o.border_radius||8,border_width:o.border_thickness||0,border_color:t(o.border_color||"white"),layout:{type:"flex",flex_flow:"row",flex_align_main:"space_around",flex_align_cross:"center"},widgets:r}}},export:M,onExportBinarySensors:z,collectRequirements:(e,s)=>{const{trackIcon:t,addFont:a}=s,o=e.props||{},n=parseInt(o.icon_size||24,10);a("Material Design Icons",400,n),o.show_prev!==!1&&t("F0141",n),o.show_home!==!1&&t("F02DC",n),o.show_next!==!1&&t("F0142",n)}};export{D as default};

const c=(t,o,{getColorStyle:l})=>{const e=o.props||{};let s=e.text||"Label";if(o.entity_id||e.entity_id){const n=o.entity_id||e.entity_id;window.AppState&&window.AppState.entityStates&&window.AppState.entityStates[n]?s=String(window.AppState.entityStates[n].state):s="{"+n.split(".").pop()+"}"}t.innerText=s,t.style.fontSize=(e.font_size||20)+"px",t.style.color=l(e.color||"black"),t.style.backgroundColor=e.bg_color||"transparent",t.style.display="flex";const i=e.text_align||"CENTER";i.includes("LEFT")?t.style.justifyContent="flex-start":i.includes("RIGHT")?t.style.justifyContent="flex-end":t.style.justifyContent="center",i.includes("TOP")?t.style.alignItems="flex-start":i.includes("BOTTOM")?t.style.alignItems="flex-end":t.style.alignItems="center",t.style.fontFamily=e.font_family==="Custom..."?e.custom_font_family||"sans-serif":e.font_family||"sans-serif",e.italic&&(t.style.fontStyle="italic"),t.style.fontWeight=e.font_weight||400,t.style.whiteSpace="pre-wrap",t.style.overflow="hidden",t.style.opacity=(e.opa!==void 0?e.opa:255)/255},d=(t,{common:o,convertColor:l,convertAlign:e,getLVGLFont:s,formatOpacity:i})=>{const n=t.props||{};let r=`"${n.text||"Label"}"`;const a=(t.entity_id||n.entity_id||"").trim();a&&(a.startsWith("text_sensor.")||a.startsWith("weather.")?r=`!lambda "return id(${a.replace(/[^a-zA-Z0-9_]/g,"_")}).state.c_str();"`:r=`!lambda "return str_sprintf(\\"%.1f\\", id(${a.replace(/[^a-zA-Z0-9_]/g,"_")}).state).c_str();"`);const f={CENTER:"CENTER",LEFT:"LEFT",RIGHT:"RIGHT",TOP:"CENTER",BOTTOM:"CENTER"};return{label:{...o,text:r,text_font:s(n.font_family,n.font_size,n.font_weight,n.italic),text_color:l(n.color||n.text_color),text_align:f[n.text_align]||"CENTER",bg_color:n.bg_color==="transparent"?void 0:l(n.bg_color),opa:i(n.opa)}}},p={id:"lvgl_label",name:"Label",category:"LVGL",defaults:{text:"Label",font_size:20,font_family:"Roboto",color:"black",font_weight:400,italic:!1,text_align:"CENTER",bg_color:"transparent",opa:255,entity_id:""},render:c,exportLVGL:d,onExportNumericSensors:t=>{const{widgets:o,isLvgl:l,pendingTriggers:e}=t;if(o)for(const s of o){if(s.type!=="lvgl_label")continue;let i=(s.entity_id||s.props?.entity_id||"").trim();!i||i.startsWith("text_sensor.")||i.startsWith("weather.")||(i.includes(".")||(i=`sensor.${i}`),l&&e&&(e.has(i)||e.set(i,new Set),e.get(i).add(`- lvgl.widget.refresh: ${s.id}`)))}},onExportTextSensors:t=>{const{widgets:o,isLvgl:l,pendingTriggers:e}=t;if(o)for(const s of o){if(s.type!=="lvgl_label")continue;let i=(s.entity_id||s.props?.entity_id||"").trim();!i||!(i.startsWith("text_sensor.")||i.startsWith("weather."))||l&&e&&(e.has(i)||e.set(i,new Set),e.get(i).add(`- lvgl.widget.refresh: ${s.id}`))}},collectRequirements:(t,{addFont:o})=>{const l=t.props||{};o(l.font_family,l.font_weight,l.font_size,l.italic)}};export{p as default};

const b=(t,p,{getColorStyle:e})=>{const n=p.props||{};t.innerHTML="",t.style.display="flex",t.style.flexDirection="column",t.style.justifyContent="center",t.style.alignItems="center";const r=e(n.color),f=(n.font_family||"Roboto")+", sans-serif",d=n.text_align||"CENTER";((x,S)=>{x==="LEFT"?S.style.alignItems="flex-start":x==="RIGHT"?S.style.alignItems="flex-end":S.style.alignItems="center"})(d,t);const o=n.format||"time_date",i=document.createElement("div");i.style.fontSize=`${n.time_font_size||28}px`,i.style.color=r,i.style.fontFamily=f,i.style.fontWeight="bold";const a=document.createElement("div");a.style.fontSize=`${n.date_font_size||16}px`,a.style.color=r,a.style.fontFamily=f,a.style.opacity="0.8";const s=new Date,h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],g=["January","February","March","April","May","June","July","August","September","October","November","December"],$=s.getHours().toString().padStart(2,"0")+":"+s.getMinutes().toString().padStart(2,"0"),c=h[s.getDay()]+", "+u[s.getMonth()]+" "+s.getDate(),m=s.getDate().toString().padStart(2,"0")+"."+(s.getMonth()+1).toString().padStart(2,"0")+"."+s.getFullYear(),y=_[s.getDay()]+" "+s.getDate().toString().padStart(2,"0")+" "+g[s.getMonth()];i.textContent=$,o==="time_only"?t.appendChild(i):o==="date_only"?(a.textContent=m,t.appendChild(a)):o==="weekday_day_month"?(a.textContent=y,t.appendChild(a)):(a.textContent=c,t.appendChild(i),t.appendChild(a))},T={id:"datetime",name:"Date & Time",category:"Core",defaults:{format:"time_date",time_font_size:28,date_font_size:16,color:"black",italic:!1,font_family:"Roboto",text_align:"CENTER"},render:b,exportLVGL:(t,{common:p,convertColor:e,convertAlign:n,getLVGLFont:r,formatOpacity:f})=>{const d=t.props||{},l=d.format||"time_date";let o="%H:%M";l==="date_only"?o="%d.%m.%Y":l==="weekday_day_month"?o="%A %d %B":l==="time_date"&&(o="%H:%M\\n%a, %b %d");let i=`!lambda |-
`;i+=`              auto now = id(ha_time).now();
`,i+=`              return now.strftime("${o}").c_str();`;const a=l==="date_only"||l==="weekday_day_month",s=a?d.date_font_size||16:d.time_font_size||28,h=a?400:700;return{label:{...p,text:i,text_font:r(d.font_family,s,h,d.italic),text_color:e(d.color),text_align:(n(d.text_align)||"center").replace("top_","").replace("bottom_",""),opa:f(d.opa)}}},collectRequirements:(t,p)=>{const{addFont:e}=p,n=t.props||{},r=parseInt(n.time_font_size||28,10),f=parseInt(n.date_font_size||16,10);e(n.font_family||"Roboto",700,r,!!n.italic),e(n.font_family||"Roboto",400,f,!!n.italic)},export:(t,p)=>{const{lines:e,getColorConst:n,addFont:r,getCondProps:f,getConditionCheck:d,getAlignY:l}=p,o=t.props||{},i=n(o.color||"black"),a=parseInt(o.time_font_size||28,10),s=parseInt(o.date_font_size||16,10),h=r(o.font_family||"Roboto",700,a,!!o.italic),u=r(o.font_family||"Roboto",400,s,!!o.italic),_=o.text_align||"CENTER",g=o.format||"time_date";e.push(`        // widget:datetime id:${t.id} type:datetime x:${t.x} y:${t.y} w:${t.width} h:${t.height} fmt:${g} ${f(t)}`);const $=d(t);$&&e.push(`        ${$}`),e.push("        {"),e.push("          auto now = id(ha_time).now();");let c=Math.round(t.x+t.width/2),m="TextAlign::CENTER";if(_==="LEFT"?(c=t.x,m="TextAlign::TOP_LEFT"):_==="RIGHT"&&(c=t.x+t.width,m="TextAlign::TOP_RIGHT"),g==="time_only"){const y=l?l(_,t.y,t.height):t.y;e.push(`          it.strftime(${c}, ${y}, id(${h}), ${i}, ${m}, "%H:%M", now);`)}else if(g==="date_only"){const y=l?l(_,t.y,t.height):t.y;e.push(`          it.strftime(${c}, ${y}, id(${u}), ${i}, ${m}, "%d.%m.%Y", now);`)}else if(g==="weekday_day_month"){const y=l?l(_,t.y,t.height):t.y;e.push(`          it.strftime(${c}, ${y}, id(${u}), ${i}, ${m}, "%A %d %B", now);`)}else{const y=a+s+2,x=Math.round(t.y+(t.height-y)/2);e.push(`          it.strftime(${c}, ${x}, id(${h}), ${i}, ${m}, "%H:%M", now);`),e.push(`          it.strftime(${c}, ${x} + ${a} + 2, id(${u}), ${i}, ${m}, "%a, %b %d", now);`)}e.push("        }"),$&&e.push("        }")}};export{T as default};
